(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{528:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("vue2脚手架目前使用的是webpack3, 基于脚手架升级到webpack4")]),s._v(" "),t("h2",{attrs:{id:"_1-常规安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-常规安装"}},[s._v("#")]),s._v(" 1.常规安装")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" vue-cli\nvue init webpack demo\n")])])]),t("h2",{attrs:{id:"_2-webpack升级到webpack4版本-安装webpack-cli等插件。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-webpack升级到webpack4版本-安装webpack-cli等插件。"}},[s._v("#")]),s._v(" 2.webpack升级到webpack4版本，安装webpack-cli等插件。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.8.1"')]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack-cli"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.1.3"')]),s._v("\n")])])]),t("h2",{attrs:{id:"_3-npm-run-dev-报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-npm-run-dev-报错"}},[s._v("#")]),s._v(" 3.npm run dev 报错")]),s._v(" "),t("p",[s._v("{% asset_img 01.png This is an image %}")]),s._v(" "),t("p",[s._v("这个是因为 webpack 和 webpack-dev-server 版本不兼容导致的，升级一下就好了")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack-dev-server"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.1.4"')]),s._v(",\n")])])]),t("h2",{attrs:{id:"_4-再次启动-报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-再次启动-报错"}},[s._v("#")]),s._v(" 4.再次启动，报错")]),s._v(" "),t("p",[s._v("{% asset_img 02.png This is an image %}")]),s._v(" "),t("p",[s._v("这里是因为 html-webpack-plugin 版本不兼容导致的,更新下版本")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"html-webpack-plugin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.2.0"')]),s._v(",\n")])])]),t("h2",{attrs:{id:"_5-然后再次启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-然后再次启动"}},[s._v("#")]),s._v(" 5.然后再次启动")]),s._v(" "),t("p",[s._v("{% asset_img 03.png This is an image %}")]),s._v(" "),t("h2",{attrs:{id:"_6-升级一下-eslint-和-eslint-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-升级一下-eslint-和-eslint-loader"}},[s._v("#")]),s._v(" 6.升级一下 eslint 和 eslint-loader")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.19.1"')]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint-loader"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.0.0"')]),s._v(",\n")])])]),t("h2",{attrs:{id:"_7-继续"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-继续"}},[s._v("#")]),s._v(" 7.继续")]),s._v(" "),t("p",[s._v("{% asset_img 04.png This is an image %}")]),s._v(" "),t("h2",{attrs:{id:"_8-升级-vue-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-升级-vue-loader"}},[s._v("#")]),s._v(" 8.升级 vue-loader")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-loader"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^15.0.10"')]),s._v("\n")])])]),t("h2",{attrs:{id:"_9-这里再次运行报错会很多"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-这里再次运行报错会很多"}},[s._v("#")]),s._v(" 9.这里再次运行报错会很多")]),s._v(" "),t("p",[s._v("{% asset_img 05.png This is an image %}")]),s._v(" "),t("h2",{attrs:{id:"_10-这里是因为最新版的-vue-loader-需要加一个新的配置-vueloaderplugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-这里是因为最新版的-vue-loader-需要加一个新的配置-vueloaderplugin"}},[s._v("#")]),s._v(" 10.这里是因为最新版的 vue-loader 需要加一个新的配置 VueLoaderPlugin")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("// webpack.dev.conf.js\n// 引入\nconst "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" VueLoaderPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n// 在下面的插件中加入\nplugins: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    new VueLoaderPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n\n// webpack.prod.conf.js 文件同样\n// 引入\nconst "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" VueLoaderPlugin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n// 在下面的插件中加入\nplugins: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    new VueLoaderPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h2",{attrs:{id:"_11-再次运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-再次运行"}},[s._v("#")]),s._v(" 11.再次运行")]),s._v(" "),t("p",[s._v("{% asset_img 06.png This is an image %}")]),s._v(" "),t("h2",{attrs:{id:"_12-webpack4-需要指定打包的模式-mode-指定一下就好-可以在-package-json-的命令中指定-也可以写入配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-webpack4-需要指定打包的模式-mode-指定一下就好-可以在-package-json-的命令中指定-也可以写入配置"}},[s._v("#")]),s._v(" 12.webpack4 需要指定打包的模式 (mode)，指定一下就好，可以在 package.json 的命令中指定，也可以写入配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("// webpack.dev.conf.js\nconst webpackConfig "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" merge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("baseWebpackConfig, "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    mode: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),s._v(",\n    module: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n// webpack.prod.conf.js \nconst webpackConfig "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" merge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("baseWebpackConfig, "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    mode: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),s._v(",\n    module: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"_13-然后再次运行-npm-run-dev"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-然后再次运行-npm-run-dev"}},[s._v("#")]),s._v(" 13.然后再次运行 npm run dev")]),s._v(" "),t("p",[s._v("{% asset_img 09.png This is an image %}")]),s._v(" "),t("p",[s._v("完全没有错误提示，至此， dev 环境的升级就完成了。")]),s._v(" "),t("h2",{attrs:{id:"_14-然而-运行-npm-run-build-后。。。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-然而-运行-npm-run-build-后。。。"}},[s._v("#")]),s._v(" 14.然而，运行 npm run build 后。。。")]),s._v(" "),t("p",[s._v("{% asset_img 07.png This is an image %}")]),s._v(" "),t("p",[s._v("熟悉的界面又出现了，")]),s._v(" "),t("p",[s._v("这部分错误是因为 webpack.optimize.CommonsChunkPlugin 已经被弃用，需要使用新的配置 config.optimization.splitChunks")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("// webpack.prod.conf.js\n// 在 plugins 同级下添加配置\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\noptimization: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   splitChunks: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     cacheGroups: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       vendor: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         test: /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/,\n         name: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vendor'")]),s._v(",\n         chunks: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'all'")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n       manifest: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         name: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'manifest'")]),s._v(",\n         minChunks: Infinity\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n plugins: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n// 去掉 plugins 中的这部分代码\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nnew webpack.optimize.CommonsChunkPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   name: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vendor'")]),s._v(",\n   minChunks "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     // any required modules inside node_modules are extracted to vendor\n     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n       module.resource "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n       /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".js$/.test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("module.resource"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n       module.resource.indexOf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n         path.join"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname, "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../node_modules'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n // extract webpack runtime and module manifest to its own "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" order to\n // prevent vendor "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("hash")]),s._v(" from being updated whenever app bundle is updated\n new webpack.optimize.CommonsChunkPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   name: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'manifest'")]),s._v(",\n   minChunks: Infinity\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n // This instance extracts shared chunks from code splitted chunks and bundles them\n // "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a separate chunk, similar to the vendor chunk\n // see: https://webpack.js.org/plugins/commons-chunk-plugin/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#extra-async-commons-chunk")]),s._v("\n new webpack.optimize.CommonsChunkPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   name: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'app'")]),s._v(",\n   async: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vendor-async'")]),s._v(",\n   children: true,\n   minChunks: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("h2",{attrs:{id:"_15-再次打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_15-再次打包"}},[s._v("#")]),s._v(" 15.再次打包")]),s._v(" "),t("p",[s._v("{% asset_img 08.png This is an image %}")]),s._v(" "),t("p",[s._v("这里是因为官方已经不推荐使用 extract-text-webpack-plugin 提取 css 样式，可以使用 mini-css-extract-plugin 替代")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("// 首先安装 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mini-css-extract-plugin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^0.4.0"')]),s._v(",\n// 并且去掉 package.json 中的包 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"extract-text-webpack-plugin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.0.0-beta.0"')]),s._v(",\n\n// utils.js\n// 去掉 extract-text-webpack-plugin\n// const ExtractTextPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'extract-text-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n// 引入\nconst MiniCssExtractPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mini-css-extract-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ngenerateLoaders 函数更改配置（*中间的为改动部分）\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options.extract"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n// ********************\n// 改动在这里\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MiniCssExtractPlugin.loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".concat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loaders"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n// ********************\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue-style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".concat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loaders"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n// webpack.prod.conf.js\n\n// 去掉 extract-text-webpack-plugin\n// const ExtractTextPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'extract-text-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n// 引入\nconst MiniCssExtractPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mini-css-extract-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n// 去掉 plugins 里的配置\nnew ExtractTextPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   filename: utils.assetsPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css/[name].[contenthash].css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n   allChunks: true,\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n\n// 然后加入新的插件配置\nnew MiniCssExtractPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   filename: utils.assetsPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css/[name].[contenthash:12].css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n   allChunks: true,\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",\n")])])]),t("h2",{attrs:{id:"_16-再次打包就可以运行了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_16-再次打包就可以运行了"}},[s._v("#")]),s._v(" 16.再次打包就可以运行了")]),s._v(" "),t("p",[s._v("{% asset_img 10.png This is an image %}")]),s._v(" "),t("p",[s._v("到此 webpack4 已经升级成功了。")])])}),[],!1,null,null,null);t.default=e.exports}}]);