<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack-进阶篇 | 张垒的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="记录好的技术文档">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.06cff2a7.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.5d9f3e6e.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/7.52cd3cfd.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/2.5e77f0d2.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/1.c3e4b76d.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/70.017b9424.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/10.fce7151c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.665820a8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.1cfbcfc6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.06542fc4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.5a7a423b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.d2f8beac.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.3366a66f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/19.a0f84501.js"><link rel="prefetch" href="/vuepress-blog/assets/js/20.8cf233fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.d142c8ff.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.3f0558f8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.7f170fad.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.ca3d8f1b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/25.e8704ed0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.ea2f5a39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.87921c42.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.f31d39ff.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.5c2c99a1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/3.eff7fee9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.b375e77b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.e44aa03f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.82fe56b9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/33.c7707b2a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.5977256e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/35.7648c433.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.0d04e6fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.f85a8b69.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.a49efe7f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.98053ef4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.15d7a48b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.2ed1c6b3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.665e6da9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.bba66369.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.0102712f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.fc0cf83d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.b24876fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.999a2df2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.5cfca3d0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.d70d2f6c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.80d9cea6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.fb9624e5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.ca82dac4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.a6b49e93.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.7f08f076.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.2a888b74.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.b39c22d6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.a9a9bc24.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.c9ba9d63.js"><link rel="prefetch" href="/vuepress-blog/assets/js/57.af85ad1c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.b21e620f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/59.604943d3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.09f6a933.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.d0b6fce9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.54065b41.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.f0028e7f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.195ddca5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.761c82aa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.6002006f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/66.97ef0021.js"><link rel="prefetch" href="/vuepress-blog/assets/js/67.ac085f10.js"><link rel="prefetch" href="/vuepress-blog/assets/js/68.e3587494.js"><link rel="prefetch" href="/vuepress-blog/assets/js/69.22b18dd6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/71.1c39dd94.js"><link rel="prefetch" href="/vuepress-blog/assets/js/8.0899600d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/9.1f42c771.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~docsearch.680926dd.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.06cff2a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>张垒的博客</h3> <p class="description" data-v-59e6cb88>记录好的技术文档</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog/" class="home-link router-link-active"><!----> <span class="site-name">张垒的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/刷题/" class="nav-link"><i class="undefined"></i>
  刷题
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      zhang lei 的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/4495277269197975" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zerle" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/vuepress-blogme.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>33</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>31</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/刷题/" class="nav-link"><i class="undefined"></i>
  刷题
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      zhang lei 的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/4495277269197975" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zerle" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Webpack-进阶篇</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Webpack-进阶篇</h1> <div data-v-8a445198><!----> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2020/7/18</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Webpack</span></i></div></div> <div class="theme-reco-content content__default"><p>解锁Webpack系列(进阶篇)</p> <p>本文是第二篇，如果你还没有阅读<a href="/2020/07/14/webpack-base">《带你深度解锁Webpack系列(基础篇)》</a>，建议阅读之后，再继续阅读本文。</p> <h2 id="_1-静态资源拷贝"><a href="#_1-静态资源拷贝" class="header-anchor">#</a> 1. 静态资源拷贝</h2> <p>有些时候，我们需要使用已有的JS文件、CSS文件（本地文件），但是不需要 webpack 编译。例如，我们在 public/index.html 中引入了 public 目录下的 js 或 css 文件。这个时候，如果直接打包，那么在构建出来之后，肯定是找不到对应的 js / css 了。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    public 目录结构
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>├── public
│   ├── config.js
│   ├── index.html
│   ├── js
│   │   ├── base.js
│   │   └── other.js
│   └── login.html
</code></pre></div><p>现在，我们在 index.html 中引入了 ./js/base.js。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span><span class="token operator">!</span>-- index.html --<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">&quot;./js/base.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
</code></pre></div><p>对于这个问题，我们可以手动将其拷贝至构建目录，然后在配置 CleanWebpackPlugin 时，注意不要清空对应的文件或文件夹即可，但是如若这个静态文件时不时的还会修改下，那么依赖于手动拷贝，是很容易出问题的。
不要过于相信自己的记性，依赖于手动拷贝的方式，大多数人应该都有过忘记拷贝的经历，你要是说你从来没忘过。</p> <p>{% asset_img base.png This is an image %}</p> <p>幸运的是，webpack 为我们这些记性不好又爱偷懒的人提供了好用的插件 CopyWebpackPlugin，它的作用就是将单个文件或整个目录复制到构建目录。</p> <p>首先安装一下依赖：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token function">npm</span> <span class="token function">install</span> copy-webpack-plugin <span class="token parameter variable">-D</span>
</code></pre></div><p>修改配置(当前，需要做的是将 public/js 目录拷贝至 dist/js 目录)：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const HtmlWebpackPlugin <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins: <span class="token punctuation">[</span>
        new CopyWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            patterns: <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    from: <span class="token string">'public/js/*.js'</span>,
                    to: path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'dist'</span>, <span class="token string">'js'</span><span class="token punctuation">)</span>,
                    flatten: true,  // 它只会拷贝文件，而不会把文件夹路径都拷贝上
                <span class="token punctuation">}</span>
                //还可以继续配置其它要拷贝的文件
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>,
<span class="token punctuation">}</span>
</code></pre></div><p>此时，重新执行 npm run dev，报错信息已经消失。</p> <p>这里说一下 flatten 这个参数，设置为 true，那么它只会拷贝文件，而不会把文件夹路径都拷贝上，大家可以不设置 flatten 时，看下构建结果。</p> <p>另外，如果我们要拷贝一个目录下的很多文件，但是想过滤掉某个或某些文件，那么 CopyWebpackPlugin 还为我们提供了 ignore 参数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins: <span class="token punctuation">[</span>
        new CopyWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            patterns: <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    from: <span class="token string">'public/js/*.js'</span>,
                    to: path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'dist'</span>, <span class="token string">'js'</span><span class="token punctuation">)</span>,
                    flatten: true,  // 它只会拷贝文件，而不会把文件夹路径都拷贝上
                    globOptions: <span class="token punctuation">{</span>
                        ignore: <span class="token punctuation">[</span><span class="token string">'**/other.**'</span><span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                //还可以继续配置其它要拷贝的文件
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>,
<span class="token punctuation">}</span>
</code></pre></div><p>例如，这里我们忽略掉 js 目录下的 other.js 文件，使用 npm run build 构建，可以看到 dist/js 下不会出现 other.js 文件。 CopyWebpackPlugin 还提供了很多其它的参数，如果当前的配置不能满足你，可以查阅文档进一步修改配置。</p> <h2 id="_2-provideplugin"><a href="#_2-provideplugin" class="header-anchor">#</a> 2.ProvidePlugin</h2> <p>ProvidePlugin 在我看来，是为懒人准备的，不过也别过度使用，毕竟全局变量不是什么“好东西”。ProvidePlugin 的作用就是不需要 import 或 require 就可以在项目中到处使用。</p> <p>ProvidePlugin 是 webpack 的内置插件，使用方式如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>new webpack.ProvidePlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier1: <span class="token string">'module1'</span>,
  identifier2: <span class="token punctuation">[</span><span class="token string">'module2'</span>, <span class="token string">'property2'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>默认寻找路径是当前文件夹 ./** 和 node_modules，当然啦，你可以指定全路径。</p> <p>React 大家都知道的，使用的时候，要在每个文件中引入 React，不然立刻抛错给你看。还有就是 jquery, lodash 这样的库，可能在多个文件中使用，但是懒得每次都引入，好嘛，一起来偷个懒，修改下 webpack 的配置:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const webpack <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span>.
    plugins: <span class="token punctuation">[</span>
        new webpack.ProvidePlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            React: <span class="token string">'react'</span>,
            Component: <span class="token punctuation">[</span><span class="token string">'react'</span>, <span class="token string">'Component'</span><span class="token punctuation">]</span>,
            Vue: <span class="token punctuation">[</span><span class="token string">'vue/dist/vue.esm.js'</span>, <span class="token string">'default'</span><span class="token punctuation">]</span>,
            $: <span class="token string">'jquery'</span>,
            _: <span class="token punctuation">[</span><span class="token string">'lodash'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样配置之后，你就可以在项目中随心所欲的使用 $、_了，并且写 React 组件时，也不需要 import React 和 Component 了，如果你想的话，你还可以把 React 的 Hooks 都配置在这里。</p> <p>另外呢，Vue 的配置后面多了一个 default，这是因为 vue.esm.js 中使用的是 export default 导出的，对于这种，必须要指定 default。React 使用的是 module.exports 导出的，因此不要写 default。
另外，就是如果你项目启动了 eslint 的话，记得修改下 eslint 的配置文件，增加以下配置：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;globals&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;React&quot;</span><span class="token builtin class-name">:</span> true,
        <span class="token string">&quot;Vue&quot;</span><span class="token builtin class-name">:</span> true,
        //<span class="token punctuation">..</span><span class="token punctuation">..</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当然啦，偷懒要有个度，你要是配一大堆全局变量，最终可能会给自己带来麻烦，对自己配置的全局变量一定要负责到底。</p> <p>{% asset_img advance02.png This is an image %}</p> <h2 id="_3-抽离css"><a href="#_3-抽离css" class="header-anchor">#</a> 3.抽离CSS</h2> <p>CSS打包我们前面已经说过了，不过呢，有些时候，我们可能会有抽离CSS的需求，即将CSS文件单独打包，这可能是因为打包成一个JS文件太大，影响加载速度，也有可能是为了缓存(例如，只有JS部分有改动)，还有可能就是“我高兴”：我想抽离就抽离，谁也管不着。
不管你是因为什么原因要抽离CSS，只要你有需求，我们就可以去实现。
首先，安装 loader:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> mini-css-extract-plugin <span class="token parameter variable">-D</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>mini-css-extract-plugin 和 extract-text-webpack-plugin 相比:
</code></pre></div><p>1.异步加载
2.不会重复编译(性能更好)
3.更容易使用
4.只适用CSS</p> <p>修改我们的配置文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
const MiniCssExtractPlugin <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins: <span class="token punctuation">[</span>
        new MiniCssExtractPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            filename: <span class="token string">'css/[name].css'</span>
            //个人习惯将css文件放在单独目录下
            //publicPath:<span class="token string">'../'</span>   //如果你的output的publicPath配置的是 <span class="token string">'./'</span> 这种相对路径，那么如果将css文件放在单独目录下，记得在这里指定一下publicPath 
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>,
    module: <span class="token punctuation">{</span>
        rules: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test: /<span class="token punctuation">\</span>.<span class="token punctuation">(</span>le<span class="token operator">|</span>c<span class="token punctuation">)</span>ss$/,
                use: <span class="token punctuation">[</span>
                    MiniCssExtractPlugin.loader, //替换之前的 style-loader
                    <span class="token string">'css-loader'</span>, <span class="token punctuation">{</span>
                        loader: <span class="token string">'postcss-loader'</span>,
                        options: <span class="token punctuation">{</span>
                            plugins: <span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token builtin class-name">return</span> <span class="token punctuation">[</span>
                                    require<span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                                        <span class="token string">&quot;overrideBrowserslist&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                                            <span class="token string">&quot;defaults&quot;</span>
                                        <span class="token punctuation">]</span>
                                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                                <span class="token punctuation">]</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>, <span class="token string">'less-loader'</span>
                <span class="token punctuation">]</span>,
                exclude: /node_modules/
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，我们重新编译：npm run build，目录结构如下所示:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>├── dist
│   ├── assets
│   │   ├── alita_e09b5c.jpg
│   │   └── thor_e09b5c.jpeg
│   ├── css
│   │   └── main.css
│   ├── bundle.fb6d0c.js
│   ├── bundle.fb6d0c.js.map
│   └── index.html
</code></pre></div><p>前面说了最好新建一个 .browserslistrc 文件，这样可以多个 loader 共享配置，所以，动手在根目录下新建文件 (.browserslistrc)，内容如下（你可以根据自己项目需求，修改为其它的配置）:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>last <span class="token number">2</span> version
<span class="token operator">&gt;</span> <span class="token number">0.25</span>%
not dead
</code></pre></div><p>修改 webpack.config.js：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
const MiniCssExtractPlugin <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span>.
    plugins: <span class="token punctuation">[</span>
        new MiniCssExtractPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            filename: <span class="token string">'css/[name].css'</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>,
    module: <span class="token punctuation">{</span>
        rules: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test: /<span class="token punctuation">\</span>.<span class="token punctuation">(</span>c<span class="token operator">|</span>le<span class="token punctuation">)</span>ss$/,
                use: <span class="token punctuation">[</span>
                    MiniCssExtractPlugin.loader,
                    <span class="token string">'css-loader'</span>, <span class="token punctuation">{</span>
                        loader: <span class="token string">'postcss-loader'</span>,
                        options: <span class="token punctuation">{</span>
                            plugins: <span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token builtin class-name">return</span> <span class="token punctuation">[</span>
                                    require<span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">]</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>, <span class="token string">'less-loader'</span>
                <span class="token punctuation">]</span>,
                exclude: /node_modules/
            <span class="token punctuation">}</span>,
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>要测试自己的 .browserlistrc 有没有生效也很简单，直接将文件内容修改为 last 1 Chrome versions ，然后对比修改前后的构建出的结果，就能看出来啦。</p> <p>可以查看更多<a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener noreferrer">browserslistrc配置项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>更多配置项，可以查看<a href="https://github.com/webpack-contrib/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin配置项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="将抽离出来的css文件进行压缩"><a href="#将抽离出来的css文件进行压缩" class="header-anchor">#</a> 将抽离出来的css文件进行压缩</h3> <p>使用 mini-css-extract-plugin，CSS 文件默认不会被压缩，如果想要压缩，需要配置 optimization，首先安装 optimize-css-assets-webpack-plugin.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> optimize-css-assets-webpack-plugin <span class="token parameter variable">-D</span>
</code></pre></div><p>修改webpack配置：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
const OptimizeCssPlugin <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry: <span class="token string">'./src/index.js'</span>,
    //<span class="token punctuation">..</span><span class="token punctuation">..</span>
    plugins: <span class="token punctuation">[</span>
        new OptimizeCssPlugin<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>,
<span class="token punctuation">}</span>
</code></pre></div><p>注意，这里将 OptimizeCssPlugin 直接配置在 plugins 里面，那么 js 和 css 都能够正常压缩，如果你将这个配置在 optimization，那么需要再配置一下 js 的压缩(开发环境下不需要去做CSS的压缩，因此后面记得将其放到 webpack.config.prod.js 中哈)。</p> <h2 id="_4-按需加载"><a href="#_4-按需加载" class="header-anchor">#</a> 4.按需加载</h2> <p>很多时候我们不需要一次性加载所有的JS文件，而应该在不同阶段去加载所需要的代码。webpack内置了强大的分割代码的功能可以实现按需加载。</p> <p>比如，我们在点击了某个按钮之后，才需要使用使用对应的JS文件中的代码，需要使用 import() 语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>document.getElementById<span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span>.onclick <span class="token operator">=</span> <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    import<span class="token punctuation">(</span><span class="token string">'./handle'</span><span class="token punctuation">)</span>.then<span class="token punctuation">(</span>fn <span class="token operator">=</span><span class="token operator">&gt;</span> fn.default<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>import() 语法，需要 @babel/plugin-syntax-dynamic-import 的插件支持，但是因为当前 @babel/preset-env 预设中已经包含了 @babel/plugin-syntax-dynamic-import，因此我们不需要再单独安装和配置。
直接 npm run build 进行构建，构建结果如下：</p> <p>{% asset_img advance03.png This is an image %}</p> <p>webpack 遇到 import(****) 这样的语法的时候，会这样处理：</p> <p>以**** 为入口新生成一个 Chunk
当代码执行到 import 所在的语句时，才会加载该 Chunk 所对应的文件（如这里的1.bundle.8bf4dc.js）</p> <p>大家可以在浏览器中的控制台中，在 Network 的 Tab页 查看文件加载的情况，只有点击之后，才会加载对应的 JS 。</p> <h2 id="_5-热更新"><a href="#_5-热更新" class="header-anchor">#</a> 5.热更新</h2> <p>1.首先配置 devServer 的 hot 为 true
2.并且在 plugins 中增加 new webpack.HotModuleReplacementPlugin()</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
const webpack <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span><span class="token punctuation">..</span>
    devServer: <span class="token punctuation">{</span>
        hot: <span class="token boolean">true</span>
    <span class="token punctuation">}</span>,
    plugins: <span class="token punctuation">[</span>
        new webpack.HotModuleReplacementPlugin<span class="token punctuation">(</span><span class="token punctuation">)</span> //热更新插件
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们配置了 HotModuleReplacementPlugin 之后，会发现，此时我们修改代码，仍然是整个页面都会刷新。不希望整个页面都刷新，还需要修改入口文件：</p> <p>3.在入口文件中新增:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>if<span class="token punctuation">(</span>module <span class="token operator">&amp;&amp;</span> module.hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module.hot.accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时，再修改代码，不会造成整个页面的刷新。</p> <h2 id="_6-多页应用打包"><a href="#_6-多页应用打包" class="header-anchor">#</a> 6.多页应用打包</h2> <p>有时，我们的应用不一定是一个单页应用，而是一个多页应用，那么如何使用 webpack 进行打包呢。为了生成目录看起来清晰，不生成单独的 map 文件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
const path <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
const HtmlWebpackPlugin <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry: <span class="token punctuation">{</span>
        index: <span class="token string">'./src/index.js'</span>,
        login: <span class="token string">'./src/login.js'</span>
    <span class="token punctuation">}</span>,
    output: <span class="token punctuation">{</span>
        path: path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'dist'</span><span class="token punctuation">)</span>,
        filename: <span class="token string">'[name].[hash:6].js'</span>
    <span class="token punctuation">}</span>,
    //<span class="token punctuation">..</span>.
    plugins: <span class="token punctuation">[</span>
        new HtmlWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            template: <span class="token string">'./public/index.html'</span>,
            filename: <span class="token string">'index.html'</span> //打包后的文件名
        <span class="token punctuation">}</span><span class="token punctuation">)</span>,
        new HtmlWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            template: <span class="token string">'./public/login.html'</span>,
            filename: <span class="token string">'login.html'</span> //打包后的文件名
        <span class="token punctuation">}</span><span class="token punctuation">)</span>,
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果需要配置多个 HtmlWebpackPlugin，那么 filename 字段不可缺省，否则默认生成的都是 index.html，如果你希望 html 的文件名中也带有 hash，那么直接修改 fliename 字段即可，例如: filename: 'login.[hash:6].html'。
生成目录如下:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">.</span>
├── dist
│   ├── <span class="token number">2</span>.463ccf.js
│   ├── assets
│   │   └── thor_e09b5c.jpeg
│   ├── css
│   │   ├── index.css
│   │   └── login.css
│   ├── index.463ccf.js
│   ├── index.html
│   ├── js
│   │   └── base.js
│   ├── login.463ccf.js
│   └── login.html
</code></pre></div><p>看起来，似乎是OK了，不过呢，查看 index.html 和 login.html 会发现，都同时引入了 index.f7d21a.js 和 login.f7d21a.js，通常这不是我们想要的，我们希望，index.html 中只引入 index.f7d21a.js，login.html 只引入 login.f7d21a.js。
HtmlWebpackPlugin 提供了一个 chunks 的参数，可以接受一个数组，配置此参数仅会将数组中指定的js引入到html文件中，此外，如果你需要引入多个JS文件，仅有少数不想引入，还可以指定 excludeChunks 参数，它接受一个数组。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span>.
    plugins: <span class="token punctuation">[</span>
        new HtmlWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            template: <span class="token string">'./public/index.html'</span>,
            filename: <span class="token string">'index.html'</span>, //打包后的文件名
            chunks: <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>,
        new HtmlWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            template: <span class="token string">'./public/login.html'</span>,
            filename: <span class="token string">'login.html'</span>, //打包后的文件名
            chunks: <span class="token punctuation">[</span><span class="token string">'login'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>,
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行 npm run build，可以看到 index.html 中仅引入了 index 的 JS 文件，而 login.html 中也仅引入了 login 的 JS 文件，符合我们的预期。</p> <h2 id="_7-resolve-配置"><a href="#_7-resolve-配置" class="header-anchor">#</a> 7.resolve 配置</h2> <p>resolve 配置 webpack 如何寻找模块所对应的文件。webpack 内置 JavaScript 模块化语法解析功能，默认会采用模块化标准里约定好的规则去寻找，但你可以根据自己的需要修改默认的规则。</p> <h3 id="_1-modules"><a href="#_1-modules" class="header-anchor">#</a> 1.modules</h3> <p>resolve.modules 配置 webpack 去哪些目录下寻找第三方模块，默认情况下，只会去 node_modules 下寻找，如果你我们项目中某个文件夹下的模块经常被导入，不希望写很长的路径，那么就可以通过配置 resolve.modules 来简化。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span><span class="token punctuation">..</span>
    resolve: <span class="token punctuation">{</span>
        modules: <span class="token punctuation">[</span><span class="token string">'./src/components'</span>, <span class="token string">'node_modules'</span><span class="token punctuation">]</span> //从左到右依次查找
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样配置之后，我们 import Dialog from 'dialog'，会去寻找 ./src/components/dialog，不再需要使用相对路径导入。如果在 ./src/components 下找不到的话，就会到 node_modules 下寻找。</p> <h3 id="_2-alias"><a href="#_2-alias" class="header-anchor">#</a> 2.alias</h3> <p>resolve.alias 配置项通过别名把原导入路径映射成一个新的导入路径，例如：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span><span class="token punctuation">..</span>
    resolve: <span class="token punctuation">{</span>
        alias: <span class="token punctuation">{</span>
            <span class="token string">'react-native'</span><span class="token builtin class-name">:</span> <span class="token string">'@my/react-native-web'</span> //这个包名是我随便写的哈
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>例如，我们有一个依赖 @my/react-native-web 可以实现 react-native 转 web。我们代码一般下面这样:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span> View, ListView, StyleSheet, Animated <span class="token punctuation">}</span> from <span class="token string">'react-native'</span><span class="token punctuation">;</span>
</code></pre></div><p>配置了别名之后，在转 web 时，会从 @my/react-native-web 寻找对应的依赖。</p> <p>当然啦，如果某个依赖的名字太长了，你也可以给它配置一个短一点的别名，这样用起来比较爽，尤其是带有 scope 的包。</p> <h3 id="_3-extensions"><a href="#_3-extensions" class="header-anchor">#</a> 3.extensions</h3> <p>适配多端的项目中，可能会出现 .web.js, .wx.js，例如在转web的项目中，我们希望首先找 .web.js，如果没有，再找 .js。我们可以这样配置:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span><span class="token punctuation">..</span>
    resolve: <span class="token punctuation">{</span>
        extensions: <span class="token punctuation">[</span><span class="token string">'web.js'</span>, <span class="token string">'.js'</span><span class="token punctuation">]</span> //当然，你还可以配置 .json, .css
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>首先寻找 ../dialog.web.js ，如果不存在的话，再寻找 ../dialog.js。这在适配多端的代码中非常有用，否则，你就需要根据不同的平台去引入文件(以牺牲了速度为代价)。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> dialog from <span class="token string">'../dialog'</span><span class="token punctuation">;</span>
</code></pre></div><p>当然，配置 extensions，我们就可以缺省文件后缀，在导入语句没带文件后缀时，会自动带上extensions 中配置的后缀后，去尝试访问文件是否存在，因此要将高频的后缀放在前面，并且数组不要太长，减少尝试次数。如果没有配置 extensions，默认只会找对对应的js文件。</p> <h3 id="_4-enforceextension"><a href="#_4-enforceextension" class="header-anchor">#</a> 4.enforceExtension</h3> <p>如果配置了 resolve.enforceExtension 为 true，那么导入语句不能缺省文件后缀。</p> <h3 id="_5-mainfields"><a href="#_5-mainfields" class="header-anchor">#</a> 5.mainFields</h3> <p>有一些第三方模块会提供多份代码，例如 bootstrap，可以查看 bootstrap 的 package.json 文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;style&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;dist/css/bootstrap.css&quot;</span>,
    <span class="token string">&quot;sass&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;scss/bootstrap.scss&quot;</span>,
    <span class="token string">&quot;main&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;dist/js/bootstrap&quot;</span>,
<span class="token punctuation">}</span>
</code></pre></div><p>resolve.mainFields 默认配置是 ['browser', 'main']，即首先找对应依赖 package.json 中的 brower 字段，如果没有，找 main 字段。
如：import 'bootstrap' 默认情况下，找得是对应的依赖的 package.json 的 main 字段指定的文件，即 dist/js/bootstrap。
假设我们希望，import 'bootsrap' 默认去找 css 文件的话，可以配置 resolve.mainFields 为:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span><span class="token punctuation">..</span>
    resolve: <span class="token punctuation">{</span>
        mainFields: <span class="token punctuation">[</span><span class="token string">'style'</span>, <span class="token string">'main'</span><span class="token punctuation">]</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_8-区分不同的环境"><a href="#_8-区分不同的环境" class="header-anchor">#</a> 8.区分不同的环境</h2> <p>目前为止我们 webpack 的配置，都定义在了 webpack.config.js 中，对于需要区分是开发环境还是生产环境的情况，我们根据 process.env.NODE_ENV 去进行了区分配置，但是配置文件中如果有多处需要区分环境的配置，这种显然不是一个好办法。
更好的做法是创建多个配置文件，如: webpack.base.js、webpack.dev.js、webpack.prod.js。</p> <p>webpack.base.js 定义公共的配置
webpack.dev.js：定义开发环境的配置
webpack.prod.js：定义生产环境的配置</p> <p>webpack-merge 专为 webpack 设计，提供了一个 merge 函数，用于连接数组，合并对象。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> webpack-merge <span class="token parameter variable">-D</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>const merge <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
merge<span class="token punctuation">(</span><span class="token punctuation">{</span>
    devtool: <span class="token string">'cheap-module-eval-source-map'</span>,
    module: <span class="token punctuation">{</span>
        rules: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>a: <span class="token number">1</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    plugins: <span class="token punctuation">[</span><span class="token number">1,2</span>,3<span class="token punctuation">]</span>
<span class="token punctuation">}</span>, <span class="token punctuation">{</span>
    devtool: <span class="token string">'none'</span>,
    mode: <span class="token string">&quot;production&quot;</span>,
    module: <span class="token punctuation">{</span>
        rules: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>a: <span class="token number">2</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>b: <span class="token number">1</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    plugins: <span class="token punctuation">[</span><span class="token number">4,5</span>,6<span class="token punctuation">]</span>,
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
//合并后的结果为
<span class="token punctuation">{</span>
    devtool: <span class="token string">'none'</span>,
    mode: <span class="token string">&quot;production&quot;</span>,
    module: <span class="token punctuation">{</span>
        rules: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>a: <span class="token number">1</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>a: <span class="token number">2</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>b: <span class="token number">1</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    plugins: <span class="token punctuation">[</span><span class="token number">1,2</span>,3,4,5,6<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>webpack.config.base.js 中是通用的 webpack 配置，以 webpack.config.dev.js 为例，如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.dev.js
const merge <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
const baseWebpackConfig <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'./webpack.config.base'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module.exports <span class="token operator">=</span> merge<span class="token punctuation">(</span>baseWebpackConfig, <span class="token punctuation">{</span>
    mode: <span class="token string">'development'</span>
    //<span class="token punctuation">..</span>.其它的一些配置
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然后修改我们的 package.json，指定对应的 config 文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//package.json
<span class="token punctuation">{</span>
    <span class="token string">&quot;scripts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;dev&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;cross-env NODE_ENV=development webpack-dev-server --config=webpack.config.dev.js&quot;</span>,
        <span class="token string">&quot;build&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;cross-env NODE_ENV=production webpack --config=webpack.config.prod.js&quot;</span>
    <span class="token punctuation">}</span>,
<span class="token punctuation">}</span>
</code></pre></div><p>你可以使用 merge 合并，也可以使用 merge.smart 合并，merge.smart 在合并loader时，会将同一匹配规则的进行合并，webpack-merge 的说明文档中给出了详细的示例。</p> <h2 id="_9-定义环境变量"><a href="#_9-定义环境变量" class="header-anchor">#</a> 9.定义环境变量</h2> <p>很多时候，我们在开发环境中会使用预发环境或者是本地的域名，生产环境中使用线上域名，我们可以在 webpack 定义环境变量，然后在代码中使用。
使用 webpack 内置插件 DefinePlugin 来定义环境变量。
DefinePlugin 中的每个键，是一个标识符.</p> <p>如果 value 是一个字符串，会被当做 code 片段
如果 value 不是一个字符串，会被stringify
如果 value 是一个对象，正常对象定义即可
如果 key 中有 typeof，它只针对 typeof 调用定义</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.dev.js
const webpack <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins: <span class="token punctuation">[</span>
        new webpack.DefinePlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
            DEV: JSON.stringify<span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span>, //字符串
            FLAG: <span class="token string">'true'</span> //FLAG 是个布尔类型
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>//index.js
if<span class="token punctuation">(</span>DEV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'dev'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    //开发环境
<span class="token punctuation">}</span>else <span class="token punctuation">{</span>
    //生产环境
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_10-利用webpack解决跨域问题"><a href="#_10-利用webpack解决跨域问题" class="header-anchor">#</a> 10.利用webpack解决跨域问题</h2> <p>假设前端在3000端口，服务端在4000端口，我们通过 webpack 配置的方式去实现跨域。</p> <p>首先，我们在本地创建一个 server.js：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">let</span> express <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin class-name">let</span> app <span class="token operator">=</span> express<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app.get<span class="token punctuation">(</span><span class="token string">'/api/user'</span>, <span class="token punctuation">(</span>req, res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    res.json<span class="token punctuation">(</span><span class="token punctuation">{</span>name: <span class="token string">'zhanglei'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app.listen<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>执行代码(run code)，现在我们可以在浏览器中访问到此接口: http://localhost:4000/api/user。</p> <p>在 index.js 中请求 /api/user，修改 index.js 如下:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//需要将 localhost:3000 转发到 localhost:4000（服务端） 端口
fetch<span class="token punctuation">(</span><span class="token string">&quot;/api/user&quot;</span><span class="token punctuation">)</span>
    .then<span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">&gt;</span> response.json<span class="token punctuation">(</span><span class="token punctuation">))</span>
    .then<span class="token punctuation">(</span>data <span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span>data<span class="token punctuation">))</span>
    .catch<span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span>err<span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><p>我们希望通过配置代理的方式，去访问 4000 的接口。</p> <h3 id="配置代理"><a href="#配置代理" class="header-anchor">#</a> 配置代理</h3> <p>修改 webpack 配置:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.dev.js
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span>.
    devServer: <span class="token punctuation">{</span>
        proxy: <span class="token punctuation">{</span>
            <span class="token string">&quot;/api&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;http://localhost:4000&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>重新执行 npm run dev，可以看到控制台打印出来了 {name: &quot;zhanglei&quot;}，实现了跨域。
大多情况，后端提供的接口并不包含  /api，即：/user，/info、/list 等，配置代理时，我们不可能罗列出每一个api。
修改我们的服务端代码，并重新执行。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//server.js
<span class="token builtin class-name">let</span> express <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin class-name">let</span> app <span class="token operator">=</span> express<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app.get<span class="token punctuation">(</span><span class="token string">'/user'</span>, <span class="token punctuation">(</span>req, res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    res.json<span class="token punctuation">(</span><span class="token punctuation">{</span>name: <span class="token string">'zhanglei'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app.listen<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>尽管后端的接口并不包含 /api，我们在请求后端接口时，仍然以 /api 开头，在配置代理时，去掉 /api，修改配置:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//webpack.config.js
module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span>.
    devServer: <span class="token punctuation">{</span>
        proxy: <span class="token punctuation">{</span>
            <span class="token string">'/api'</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                target: <span class="token string">'http://localhost:4000'</span>,
                pathRewrite: <span class="token punctuation">{</span>
                    <span class="token string">'/api'</span><span class="token builtin class-name">:</span> <span class="token string">''</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>重新执行 npm run dev，在浏览器中访问： http://localhost:3000/，控制台中也打印出了{name: &quot;zhanglei&quot;}，跨域成功.</p> <h2 id="_11-前端模拟数据"><a href="#_11-前端模拟数据" class="header-anchor">#</a> 11.前端模拟数据</h2> <p>简单数据模拟</p> <div class="language-bash extra-class"><pre class="language-bash"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devServer: <span class="token punctuation">{</span>
        before<span class="token punctuation">(</span>app<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            app.get<span class="token punctuation">(</span><span class="token string">'/user'</span>, <span class="token punctuation">(</span>req, res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
                res.json<span class="token punctuation">(</span><span class="token punctuation">{</span>name: <span class="token string">'zhanglei'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 src/index.js 中直接请求 /user 接口。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>fetch<span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
    .then<span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">&gt;</span> response.json<span class="token punctuation">(</span><span class="token punctuation">))</span>
    .then<span class="token punctuation">(</span>data <span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span>data<span class="token punctuation">))</span>
    .catch<span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span>err<span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><p>使用 mocker-api mock数据接口</p> <p>mocker-api 为 REST API 创建模拟 API。在没有实际 REST API 服务器的情况下测试应用程序时，它会很有用。</p> <p>1.安装 mocker-api:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> mocker-api <span class="token parameter variable">-D</span>
</code></pre></div><p>2.在项目中新建mock文件夹，新建 mocker.js.文件，文件如下:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'GET /user'</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>name: <span class="token string">'zhanglei'</span><span class="token punctuation">}</span>,
    <span class="token string">'POST /login/account'</span><span class="token builtin class-name">:</span> <span class="token punctuation">(</span>req, res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        const <span class="token punctuation">{</span> password, username <span class="token punctuation">}</span> <span class="token operator">=</span> req.body
        <span class="token keyword">if</span> <span class="token punctuation">(</span>password <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'admin'</span> <span class="token operator">&amp;&amp;</span> username <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'admin'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin class-name">return</span> res.send<span class="token punctuation">(</span><span class="token punctuation">{</span>
                status: <span class="token string">'ok'</span>,
                code: <span class="token number">0</span>,
                token: <span class="token string">'sdfsdfsdfdsf'</span>,
                data: <span class="token punctuation">{</span> id: <span class="token number">1</span>, name: <span class="token string">'zhanglei'</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token builtin class-name">return</span> res.send<span class="token punctuation">(</span><span class="token punctuation">{</span> status: <span class="token string">'error'</span>, code: <span class="token number">403</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3.修改 webpack.config.dev.js:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const apiMocker <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'mocker-api'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module.export <span class="token operator">=</span> <span class="token punctuation">{</span>
    //<span class="token punctuation">..</span>.
    devServer: <span class="token punctuation">{</span>
        before<span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">{</span>
            apiMocker<span class="token punctuation">(</span>app, path.resolve<span class="token punctuation">(</span><span class="token string">'./mock/mocker.js'</span><span class="token punctuation">))</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样，我们就可以直接在代码中像请求后端接口一样对mock数据进行请求。</p> <p>4.重启 npm run dev，可以看到，控制台成功打印出来 {name: 'zhanglei'}
5.我们再修改下 src/index.js，检查下POST接口是否成功</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//src/index.js
fetch<span class="token punctuation">(</span><span class="token string">&quot;/login/account&quot;</span>, <span class="token punctuation">{</span>
    method: <span class="token string">&quot;POST&quot;</span>,
    headers: <span class="token punctuation">{</span>
        <span class="token string">'Accept'</span><span class="token builtin class-name">:</span> <span class="token string">'application/json'</span>,
        <span class="token string">'Content-Type'</span><span class="token builtin class-name">:</span> <span class="token string">'application/json'</span>
    <span class="token punctuation">}</span>,
    body: JSON.stringify<span class="token punctuation">(</span><span class="token punctuation">{</span>
        username: <span class="token string">&quot;admin&quot;</span>,
        password: <span class="token string">&quot;admin&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
    .then<span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">&gt;</span> response.json<span class="token punctuation">(</span><span class="token punctuation">))</span>
    .then<span class="token punctuation">(</span>data <span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span>data<span class="token punctuation">))</span>
    .catch<span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span>err<span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><p>可以在控制台中看到接口返回的成功的数据。进阶篇就到这里结束啦!!!</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_1-静态资源拷贝" class="sidebar-link reco-side-_1-静态资源拷贝" data-v-b57cc07c>1. 静态资源拷贝</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_2-provideplugin" class="sidebar-link reco-side-_2-provideplugin" data-v-b57cc07c>2.ProvidePlugin</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_3-抽离css" class="sidebar-link reco-side-_3-抽离css" data-v-b57cc07c>3.抽离CSS</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#将抽离出来的css文件进行压缩" class="sidebar-link reco-side-将抽离出来的css文件进行压缩" data-v-b57cc07c>将抽离出来的css文件进行压缩</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_4-按需加载" class="sidebar-link reco-side-_4-按需加载" data-v-b57cc07c>4.按需加载</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_5-热更新" class="sidebar-link reco-side-_5-热更新" data-v-b57cc07c>5.热更新</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_6-多页应用打包" class="sidebar-link reco-side-_6-多页应用打包" data-v-b57cc07c>6.多页应用打包</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_7-resolve-配置" class="sidebar-link reco-side-_7-resolve-配置" data-v-b57cc07c>7.resolve 配置</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_1-modules" class="sidebar-link reco-side-_1-modules" data-v-b57cc07c>1.modules</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_2-alias" class="sidebar-link reco-side-_2-alias" data-v-b57cc07c>2.alias</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_3-extensions" class="sidebar-link reco-side-_3-extensions" data-v-b57cc07c>3.extensions</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_4-enforceextension" class="sidebar-link reco-side-_4-enforceextension" data-v-b57cc07c>4.enforceExtension</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_5-mainfields" class="sidebar-link reco-side-_5-mainfields" data-v-b57cc07c>5.mainFields</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_8-区分不同的环境" class="sidebar-link reco-side-_8-区分不同的环境" data-v-b57cc07c>8.区分不同的环境</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_9-定义环境变量" class="sidebar-link reco-side-_9-定义环境变量" data-v-b57cc07c>9.定义环境变量</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_10-利用webpack解决跨域问题" class="sidebar-link reco-side-_10-利用webpack解决跨域问题" data-v-b57cc07c>10.利用webpack解决跨域问题</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#配置代理" class="sidebar-link reco-side-配置代理" data-v-b57cc07c>配置代理</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/webpack-advanced.html#_11-前端模拟数据" class="sidebar-link reco-side-_11-前端模拟数据" data-v-b57cc07c>11.前端模拟数据</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:-1;" data-v-248d85d6></canvas></div><canvas id="vuepress-canvas-cursor"></canvas><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/media/starsky.m4a" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:20px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/media/starsky.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/media/starsky.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>Star Sky</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>Two Steps From Hell</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/vuepress-blog/assets/js/app.5d9f3e6e.js" defer></script><script src="/vuepress-blog/assets/js/7.52cd3cfd.js" defer></script><script src="/vuepress-blog/assets/js/2.5e77f0d2.js" defer></script><script src="/vuepress-blog/assets/js/1.c3e4b76d.js" defer></script><script src="/vuepress-blog/assets/js/70.017b9424.js" defer></script>
  </body>
</html>
