<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React快速暴力入门 | 张垒的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="记录好的技术文档">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.06cff2a7.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.5d9f3e6e.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/7.52cd3cfd.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/2.5e77f0d2.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/1.c3e4b76d.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/35.7648c433.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/10.fce7151c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.665820a8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.1cfbcfc6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.06542fc4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.5a7a423b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.d2f8beac.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.3366a66f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/19.a0f84501.js"><link rel="prefetch" href="/vuepress-blog/assets/js/20.8cf233fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.d142c8ff.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.3f0558f8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.7f170fad.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.ca3d8f1b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/25.e8704ed0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.ea2f5a39.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.87921c42.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.f31d39ff.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.5c2c99a1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/3.eff7fee9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.b375e77b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.e44aa03f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.82fe56b9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/33.c7707b2a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.5977256e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.0d04e6fc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.f85a8b69.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.a49efe7f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.98053ef4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.15d7a48b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.2ed1c6b3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.665e6da9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.bba66369.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.0102712f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.fc0cf83d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.b24876fd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.999a2df2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.5cfca3d0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.d70d2f6c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.80d9cea6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.fb9624e5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.ca82dac4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.a6b49e93.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.7f08f076.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.2a888b74.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.b39c22d6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.a9a9bc24.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.c9ba9d63.js"><link rel="prefetch" href="/vuepress-blog/assets/js/57.af85ad1c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.b21e620f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/59.604943d3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.09f6a933.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.d0b6fce9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.54065b41.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.f0028e7f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.195ddca5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.761c82aa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.6002006f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/66.97ef0021.js"><link rel="prefetch" href="/vuepress-blog/assets/js/67.ac085f10.js"><link rel="prefetch" href="/vuepress-blog/assets/js/68.e3587494.js"><link rel="prefetch" href="/vuepress-blog/assets/js/69.22b18dd6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/70.017b9424.js"><link rel="prefetch" href="/vuepress-blog/assets/js/71.1c39dd94.js"><link rel="prefetch" href="/vuepress-blog/assets/js/8.0899600d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/9.1f42c771.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~docsearch.680926dd.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.06cff2a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>张垒的博客</h3> <p class="description" data-v-59e6cb88>记录好的技术文档</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog/" class="home-link router-link-active"><!----> <span class="site-name">张垒的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/刷题/" class="nav-link"><i class="undefined"></i>
  刷题
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      zhang lei 的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/4495277269197975" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zerle" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/vuepress-blogme.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>33</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>31</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/刷题/" class="nav-link"><i class="undefined"></i>
  刷题
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/工具/" class="nav-link"><i class="undefined"></i>
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      zhang lei 的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/4495277269197975" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zerle" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>React快速暴力入门</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">React快速暴力入门</h1> <div data-v-8a445198><!----> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022/6/12</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>React入门</span></i></div></div> <div class="theme-reco-content content__default"><p>React 作为如今三大框架之一，在进行了短期的学习后，整理了一些笔记，做一下分享,如果有错误，欢迎指出。</p> <h3 id="一、react-简介"><a href="#一、react-简介" class="header-anchor">#</a> 一、React 简介</h3> <h4 id="_1-什么是-react"><a href="#_1-什么是-react" class="header-anchor">#</a> 1. 什么是 React：</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>React 是一款由 Facebook开发的用于构造用户界面的Javascript库。
React 与Vue相比，vue的语法简单易上手，适用于小而精的项目，但是 React在组件上的复用性与设计性上会胜于vue一筹，适用于大型的项目。
React 将页面以一个个组件的方式进行拆分与组装，重复使用提高效率（可见下图）
React 对数据的处理与管理比原生更加的清晰。
</code></pre></div><h4 id="_2-react-的特点"><a href="#_2-react-的特点" class="header-anchor">#</a> 2. React 的特点</h4> <ul><li>1.声明式设计 −React 的每个组件都是通过声明创建，使得页面逻辑更加清晰</li></ul> <img src="data:image/png;base64,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"> <ul><li>2.虚拟 DOM −React 每次渲染页面时会创建一个虚拟 DOM，与现有的 DOM 进行对比，有差异的才进行替换重新渲染，提高了效率。</li></ul> <img src="/vuepress-blogassets/img/02.12b9a074.png"> <ul><li>3.JSX − JSX 是 JavaScript 语法的扩展。React 开发不一定使用 JSX ，但我们建议使用它。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>// 在 javascript中创建元素
const DOM <span class="token operator">=</span> document.createElement<span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> // 真实DOM
DOM.innerText <span class="token operator">=</span> <span class="token string">&quot;这是h1标签&quot;</span><span class="token punctuation">;</span>
// 在 jsx中创建元素
const VDOM <span class="token operator">=</span> <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>这是h1标签<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> // 虚拟DOM

</code></pre></div><ul><li>4.组件 − 通过 React 构建组件，使得代码更加容易得到复用，能够很好的应用在大项目的开发中。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>// 不必现在就看懂，仅需要知道每个组件都是需要进行声明后才能使用
<span class="token function">import</span> React, <span class="token punctuation">{</span>PureCompoent<span class="token punctuation">}</span> from <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token builtin class-name">export</span> default class Header extends PureCompoent<span class="token punctuation">{</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>这是头部组件<span class="token operator">&lt;</span>/header<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
// ------------------------------------------------
// 在需要使用 header组件时调用即可重复使用
<span class="token function">import</span> Header from <span class="token string">&quot;./Header&quot;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>Header<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/Header<span class="token operator">&gt;</span>
</code></pre></div><ul><li><ol start="5"><li>单向响应的数据流 − React 实现了单向响应的数据流，从而减少了重复代码，这也是它为什么比传统数据绑定更简单。(这个在后面会了解到)</li></ol></li></ul> <h4 id="_3-安装与使用"><a href="#_3-安装与使用" class="header-anchor">#</a> 3.安装与使用</h4> <ul><li>1.使用 cdn</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>script crossorigin <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/react@16/umd/react.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script crossorigin <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/react-dom@16/umd/react-dom.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
</code></pre></div><ul><li>2.通过下载导入 React 包</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>script <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">&quot;../js/react.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">&quot;../js/react-dom.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">&quot;../js/babel.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
</code></pre></div><ul><li>3.使用 react 的脚手架 create-react-app 创建项目文件会自带 react</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i create-react-app <span class="token parameter variable">-g</span>
create-react-app 项目名称
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>注意：使用 react必须使用 babel.js 将 jsx语法转为 js语法 ReactDOM 独立于 React（为了防止React太大太臃肿而拆开）
</code></pre></div><h4 id="_4-虚拟-dom"><a href="#_4-虚拟-dom" class="header-anchor">#</a> 4. 虚拟 DOM</h4> <ul><li>(1) 关于虚拟 DOM
虚拟 DOM 的本质就是一个对象，真实 DOM 也是个对象，但虚拟 DOM 的属性更少，更加轻量。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>// 虚拟DOM  
const VDOM <span class="token operator">=</span> <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Hello World<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token punctuation">;</span> // 此处不需要引号，因为不是字符串
// 真实DOM
const TDOM <span class="token operator">=</span> document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console.log<span class="token punctuation">(</span><span class="token string">&quot;虚拟DOM: &quot;</span>, VDOM<span class="token punctuation">)</span><span class="token punctuation">;</span>   // Object
console.log<span class="token punctuation">(</span><span class="token string">&quot;真实DOM: &quot;</span>, TDOM<span class="token punctuation">)</span><span class="token punctuation">;</span>   // <span class="token operator">&lt;</span>div <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
console.log<span class="token punctuation">(</span><span class="token string">&quot;虚拟DOM类型: &quot;</span>, typeof VDOM<span class="token punctuation">)</span><span class="token punctuation">;</span>  // object
console.log<span class="token punctuation">(</span><span class="token string">&quot;真实DOM类型: &quot;</span>, typeof TDOM<span class="token punctuation">)</span><span class="token punctuation">;</span>  // object
console.log<span class="token punctuation">(</span>VDOM instanceof Object<span class="token punctuation">)</span><span class="token punctuation">;</span>    // <span class="token boolean">true</span>
console.log<span class="token punctuation">(</span>TDOM instanceof Object<span class="token punctuation">)</span><span class="token punctuation">;</span>    // <span class="token boolean">true</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>虚拟DOM 最终会被 React转为 真实DOM呈现在页面上
</code></pre></div><ul><li>(2) 创建虚拟 DOM</li></ul> <p>** 1.通过 React 的方法 createElement()方法创建虚拟 DOM</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// React.createElement<span class="token punctuation">(</span>标签名称, 标签属性, 标签内容<span class="token punctuation">)</span>
const VDOM1 <span class="token operator">=</span> React.createElement<span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span>, <span class="token punctuation">{</span>id: <span class="token string">&quot;title&quot;</span><span class="token punctuation">}</span>, <span class="token string">&quot;This is Title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>** 2.使用方法一的语法糖创建虚拟 DOM</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const VDOM2 <span class="token operator">=</span> <span class="token operator">&lt;</span>h1 <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>This is Title<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_5-关于-jsx"><a href="#_5-关于-jsx" class="header-anchor">#</a> 5. 关于 JSX</h4> <p>jsx 语法与 javascript 语法非常相似，只有一些需要注意的地方</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// 虚拟DOM  
const VDOM <span class="token operator">=</span> <span class="token punctuation">(</span>  // 使用括号框住 jsx标签表示层级会更加美观些。
    <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
<span class="token punctuation">)</span>
const myid <span class="token operator">=</span> <span class="token string">&quot;HeLlO&quot;</span><span class="token punctuation">;</span>
const content <span class="token operator">=</span> <span class="token string">&quot;Happy New Year&quot;</span>
const students <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span>id: <span class="token string">&quot;001&quot;</span>, name: <span class="token string">&quot;Tom&quot;</span>, age: <span class="token number">18</span><span class="token punctuation">}</span>,
<span class="token punctuation">{</span>id: <span class="token string">&quot;002&quot;</span>, name: <span class="token string">&quot;Tim&quot;</span>, age: <span class="token number">19</span><span class="token punctuation">}</span>,
<span class="token punctuation">{</span>id: <span class="token string">&quot;003&quot;</span>, name: <span class="token string">&quot;Jerry&quot;</span>, age: <span class="token number">20</span><span class="token punctuation">}</span>,
<span class="token punctuation">]</span><span class="token punctuation">;</span>
const VDOM2 <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;title&quot;</span> <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token punctuation">{</span>myid.toLowerCase<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color: <span class="token string">'pink'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token punctuation">{</span>/* 使用 ES6的 map<span class="token punctuation">(</span><span class="token punctuation">)</span> 函数进行列表渲染（将数据批量渲染到页面上） */<span class="token punctuation">}</span>
        <span class="token punctuation">{</span>
            students.map<span class="token punctuation">(</span>student<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
                <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>li <span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token punctuation">{</span>student.id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>student.name<span class="token punctuation">}</span>---<span class="token punctuation">{</span>student.age<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span>/<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div><h5 id="jsx-语法规则"><a href="#jsx-语法规则" class="header-anchor">#</a> jsx 语法规则：</h5> <ul><li>定义虚拟 DOM 时不要写引号</li> <li>标签中混入  js 表达式时要用  {}
<ul><li>表达式会产生一个值，可以放在任何需要值的地方</li> <li>语句时一串代码，用于处理逻辑用的</li></ul></li> <li>标签中类名指定不用  class，要用  className</li> <li>标签中使用内联样式时，要用双括号写法（使用小驼峰写法写 css 样式）</li> <li>添加事件属性时（如 onclick)，on 后面的单词首字母要大写（如 onClick）</li> <li>虚拟 DOM 必须只有一个根标签</li> <li>标签必须闭合</li> <li>标签开头
<ul><li>标签开头为小写时，会被  jsx 编译为  html 标签，若  html 没有对应同名元素则报错</li> <li>标签开头为大写时，会被  jsx 识别为组件，若没找到对应组件则</li></ul></li></ul> <h4 id="_6-渲染到页面上"><a href="#_6-渲染到页面上" class="header-anchor">#</a> 6. 渲染到页面上</h4> <p>使用 ReactDOM 的 render()方法进行渲染</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const VDOM <span class="token operator">=</span> <span class="token operator">&lt;</span>h1 <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>This is a Title<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token punctuation">;</span>    // 创建虚拟DOM
// ReactDOM.render<span class="token punctuation">(</span> 组件<span class="token punctuation">(</span>虚拟DOM<span class="token punctuation">)</span>,  要绑定到哪个元素上 <span class="token punctuation">)</span><span class="token punctuation">;</span>
ReactDOM.render<span class="token punctuation">(</span>VDOM, document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="二、组件的使用"><a href="#二、组件的使用" class="header-anchor">#</a> 二、组件的使用</h3> <p>在 React 中，有两种组件的创建方式，分别为函数式组件和类式组件。其中 类式组件使用频率较高（React 16.8 出现 Hook 后函数式组件也多了起来）</p> <h4 id="函数式组件"><a href="#函数式组件" class="header-anchor">#</a> 函数式组件</h4> <p>顾名思义，该组件是由函数来写的</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> Demo<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>    // 定义一个组件，名为 Demo
    <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>This is a component<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token punctuation">;</span>    // 返回值为组件的DOM内容
<span class="token punctuation">}</span>
ReactDOM.render<span class="token punctuation">(</span><span class="token operator">&lt;</span>Demo/<span class="token operator">&gt;</span>, document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">))</span>
</code></pre></div><h5 id="函数式组件定义"><a href="#函数式组件定义" class="header-anchor">#</a> 函数式组件定义：</h5> <ul><li>函数名称必须大写</li> <li>调用时以标签方式调用且开头大写</li> <li>函数式组件的参数为 props</li></ul> <h4 id="类式组件"><a href="#类式组件" class="header-anchor">#</a> 类式组件</h4> <p>该组件通过类来构建，但需要继承 React 自带的一个类 Component。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// 使用 ES6写法创建类式组件，并继承于 React.Component
class Demo extends React.Component<span class="token punctuation">{</span>

    // 添加render<span class="token punctuation">(</span><span class="token punctuation">)</span> 函数（必须），返回值为组件的虚拟DOM
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>      // render<span class="token punctuation">(</span><span class="token punctuation">)</span> 函数的 this 指向组件的实例对象
        <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>This is a Title<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
ReactDOM.render<span class="token punctuation">(</span><span class="token operator">&lt;</span>Demo/<span class="token operator">&gt;</span>, document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="类式组件的定义"><a href="#类式组件的定义" class="header-anchor">#</a> 类式组件的定义：</h5> <ul><li>必须继承 React 的内置类 Component</li> <li>必须包含方法 render()</li> <li>构造函数 constructor()的参数为 props（后面会讲），如果需要使用 constructor 则必须调用父类的构造函数 super(props)</li></ul> <h5 id="类式组件挂载时的执行情况"><a href="#类式组件挂载时的执行情况" class="header-anchor">#</a> 类式组件挂载时的执行情况：</h5> <ul><li>React 解析组件标签，发现了 Demo 组件</li> <li>发现为类式组件，随后 new 出该类的实例对象，通过实例调用原型对象上的 render 方法</li> <li>将 render 方法返回的虚拟 DOM 转为真实 DOM，随后呈现到页面中</li></ul> <h5 id="组件定义的注意事项"><a href="#组件定义的注意事项" class="header-anchor">#</a> 组件定义的注意事项：</h5> <ul><li>类式组件的 render() 返回的组件标签与函数式组件返回的组件标签一定要有一个根标签</li> <li>都必须以大写字母开头</li></ul> <h4 id="组件的挂载与卸载"><a href="#组件的挂载与卸载" class="header-anchor">#</a> 组件的挂载与卸载</h4> <p>挂载已经看了很多个了，直接上代码：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// ReactDOM.render<span class="token punctuation">(</span> 组件, 要绑定在哪个元素上 <span class="token punctuation">)</span><span class="token punctuation">;</span>
ReactDOM.render<span class="token punctuation">(</span> <span class="token operator">&lt;</span>Demo/<span class="token operator">&gt;</span>, document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>卸载的代码长点，我也直接放上来了：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// ReactDOM.unmountComponentAtNode<span class="token punctuation">(</span> 要卸载哪个元素上的组件 <span class="token punctuation">)</span><span class="token punctuation">;</span>
ReactDOM.unmountComponentAtNode<span class="token punctuation">(</span> document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="其他小知识"><a href="#其他小知识" class="header-anchor">#</a> 其他小知识</h4> <ul><li>包含表单元素的组件分为非受控租价与受控组件
<ul><li>受控组件：表单组件的输入组件随着输入并将内容存储到状态中（随时更新）</li> <li>非受控组件：表单组件的输入组件的内容在有需求的时候才存储到状态中（即用即取）</li></ul></li></ul> <h3 id="三、组件的三大属性"><a href="#三、组件的三大属性" class="header-anchor">#</a> 三、组件的三大属性</h3> <p>组件的实质就是个对象，而对象自然有属性，在组件里最常用的三个属性分别是 state、props 和 refs</p> <h4 id="_1-state"><a href="#_1-state" class="header-anchor">#</a> 1. state</h4> <p>state 即组件的状态，说的明白点就是该组件所存储的（所需要使用的）数据</p> <h5 id="类式组件中的使用"><a href="#类式组件中的使用" class="header-anchor">#</a> 类式组件中的使用：</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>class Weather extends React.Component<span class="token punctuation">{</span>
    constructor<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>
        super<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        // this.state <span class="token operator">=</span> <span class="token punctuation">{</span>weather: <span class="token string">&quot;Spring&quot;</span><span class="token punctuation">}</span>     // 也可以在构造函数中定义 state
    <span class="token punctuation">}</span>

    state <span class="token operator">=</span> <span class="token punctuation">{</span>   // 定义 state
        weather: <span class="token string">&quot;summer&quot;</span>,
    <span class="token punctuation">}</span>

    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        // 当前季节为：summer
        <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前季节为：<span class="token punctuation">{</span> this.state.weather <span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>使用的时候通过 this.state 调用 state 里的值 类式组件定义 state:</p> <ul><li>可以在构造函数中初始化 state</li> <li>可以在类中添加属性 state 来初始化</li></ul> <h5 id="函数式组件中的使用"><a href="#函数式组件中的使用" class="header-anchor">#</a> 函数式组件中的使用</h5> <ul><li>在 React16.8 前，函数式组件并不能有自己的 state（因为会重复初始化数据）</li> <li>到 React16.8 后，出现了 Hook 方法，使得函数式组件也可以使用 state 特性，先了解即可，后面会教学。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    const <span class="token punctuation">[</span>weather, setWeather<span class="token punctuation">]</span> <span class="token operator">=</span> React.useState<span class="token punctuation">(</span><span class="token string">&quot;Winter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前季节为：<span class="token punctuation">{</span>weather<span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>     // 当前季节为：Winter
<span class="token punctuation">}</span>

</code></pre></div><h5 id="修改-state"><a href="#修改-state" class="header-anchor">#</a> 修改 state</h5> <p>在类式组件的函数中，你会发现直接修改 state 的值，如：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>this.state.count <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><p>如果你在页面中使用了 count 这个值，你会发现，这页面咋没变呢？
梳理一下页面渲染靠的是哪个函数呢？不是靠的 render()函数吗？
如果你每次直接修改 state 后在调用 render()函数的话，不会显得太麻烦了吗？
其实 React 也不建议 state 不允许直接修改，而是通过特定的渠道来修改，便是使用在类的原型对象上的方法 setState()</p> <h5 id="setstate"><a href="#setstate" class="header-anchor">#</a> setState()</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>this.setState<span class="token punctuation">(</span>partialState, <span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>partialState: 需要更新的状态的部分对象</li> <li>callback: 更新完状态后的回调函数</li></ul> <p>setState 有两种写法： 写法 1：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>this.setState<span class="token punctuation">(</span><span class="token punctuation">{</span>
    count: <span class="token number">1</span>,
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>写法 2：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// 传入一个函数，返回x需要修改成的对象，参数为当前的 state
this.setState<span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>count: state.count+1<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>使用那种写法，取决于修改的状态是否需要动用到当前的状态</p> <h5 id="forceupdate"><a href="#forceupdate" class="header-anchor">#</a> forceUpdate()</h5> <p>还有一种修改状态的方法，就是 forceUpdate，意思是强制更新，即强制更新状态。
参数为更新状态完成后的回调函数</p> <div class="language-bash extra-class"><pre class="language-bash"><code>this.forceUpdate<span class="token punctuation">(</span><span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>setState 更新与 forceUpdate 更新都是一种合并操作，而不是替换操作</p> <ul><li>在执行 setState 操作后，React 会自动帮我们调用一次 render()</li> <li>render() 的执行次数便是 1+n (1 为初始化时的自动调用，n 为状态更新的次数（即调用 setState 或 forceUpdate 的次数）)</li> <li>尽量少用或不用 forceUpdate</li></ul> <h4 id="_2-props"><a href="#_2-props" class="header-anchor">#</a> 2. props</h4> <p>与 state 不同，state 是组件自身的状态（数据），而 props 则是外部传入给自己的状态（数据）
props 在组件内修改，必须由谁传入的即由谁修改</p> <h5 id="类式组件中使用"><a href="#类式组件中使用" class="header-anchor">#</a> 类式组件中使用</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>class Person extends React.component<span class="token punctuation">{</span>

    constructor<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>     // 还记得构造函数的参数吗，也能够获取 props
        super<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    // 可以使用静态属性 propTyps 来限制props
    static propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
         // 在 <span class="token number">16</span>版本前，通过使用React自带的PropTypess属性传递值
        // name: React.PropTypes.string.isRequired,

        // <span class="token number">16</span>版本后，PropTypes被单独移出 React作为单独的个体，需要另外导入
        name: PropTypes.string.isRequired, // 字符串类型，且必须传值
        sex: PropTypes.string,  // 字符串类型
        age: PropTypes.number,  // 数字类型
        speak: PropTypes.func,  // 函数类型
    <span class="token punctuation">}</span>

    // 可以使用静态属性 defaultProps 来设置某些 prop 的默认值
    static defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
        sex: <span class="token string">&quot;男&quot;</span>,   // 设置 sex 的 prop 默认值为 “男”
    <span class="token punctuation">}</span>

    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        const <span class="token punctuation">{</span>name, sex, age<span class="token punctuation">}</span> <span class="token operator">=</span> this.props<span class="token punctuation">;</span>    // 从 props中获取值
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别：<span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

// ReactDOM.render<span class="token punctuation">(</span> <span class="token operator">&lt;</span>Person <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;Tom&quot;</span> <span class="token assign-left variable">sex</span><span class="token operator">=</span><span class="token string">&quot;男&quot;</span> <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token string">&quot;16&quot;</span>/<span class="token operator">&gt;</span>, document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>    // 以类似属性的方式传递 props值

ReactDOM.render<span class="token punctuation">(</span><span class="token operator">&lt;</span>Person <span class="token punctuation">{</span><span class="token punctuation">..</span>.p<span class="token punctuation">}</span> /<span class="token operator">&gt;</span>, document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">))</span>；
// 可以用扩展运算符来传递 props值

</code></pre></div><p>在使用的时候可以通过 this.props 来获取值
类式组件的 props:</p> <ul><li>通过在组件标签上传递值，在组件中就可以获取到所传递的值</li> <li>在构造函数的参数里可以获取到 props</li> <li>可以分别设置 propTypes 和 defaultProps 两个属性来分别操作 props 的规范和默认值，两者都是直接添加在类式组件的原型对象上的（所以需要添加 static）</li></ul> <h5 id="函数式组件中使用"><a href="#函数式组件中使用" class="header-anchor">#</a> 函数式组件中使用</h5> <p>还记得说函数式组件的参数是什么吗？便是 props。
传入的方式与类式组件相同，都是在组件标签中传递值</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> Person<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>   // 参数为 props
    const <span class="token punctuation">{</span>name, sex, age<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>     // 使用占位符获取 props的值
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别：<span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

Person.defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>     // 设置 props默认值
    sex: <span class="token string">&quot;男&quot;</span>,
    age: <span class="token number">18</span>,
<span class="token punctuation">}</span>
Person.propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>    // 设置 props限制
    name: PropTypes.string.isRequired,
    sex: PropTypes.string,
    age: PropTypes.number,
<span class="token punctuation">}</span>

const p <span class="token operator">=</span> <span class="token punctuation">{</span>name:<span class="token string">&quot;Jerry&quot;</span>, sex:<span class="token string">&quot;女&quot;</span>, age:16<span class="token punctuation">}</span>
ReactDOM.render<span class="token punctuation">(</span><span class="token operator">&lt;</span>Person <span class="token punctuation">{</span><span class="token punctuation">..</span>.p<span class="token punctuation">}</span>/<span class="token operator">&gt;</span>,document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>

</code></pre></div><p>函数组件的 props 定义:</p> <ul><li>同样也是在组件标签中传递 props 的值</li> <li>组件函数的参数为 props</li> <li>对 props 的限制和设置默认值也同样实在原型对象上</li></ul> <h4 id="_3-refs"><a href="#_3-refs" class="header-anchor">#</a> 3. refs</h4> <p>假设在你的组件里有着表单元素，然后你需要获取到其中的值，该怎么获取呢？有的人可能想给元素绑定 id 后用 document.querySelector 来查找元素，但这样就违背了 React 的想法，又开始操作起了 DOM 元素，所有 React 提供了第三种特性 refs</p> <p>在 React 的历史中，共有三种操作 refs 的方法，分别为：</p> <ul><li>字符串形式</li> <li>回调形式</li> <li>createRef 形式</li></ul> <p>让我们一一来了解一下：</p> <h5 id="类式组件中使用-refs"><a href="#类式组件中使用-refs" class="header-anchor">#</a> 类式组件中使用 refs</h5> <h6 id="_1-字符串形式的-refs"><a href="#_1-字符串形式的-refs" class="header-anchor">#</a> (1) 字符串形式的 refs</h6> <div class="language-bash extra-class"><pre class="language-bash"><code>class Demo extends React.Component<span class="token punctuation">{</span>

    <span class="token function-name function">showData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         // 通过自己设定的 refs名称获取对应的元素
        const <span class="token punctuation">{</span>myInput<span class="token punctuation">}</span> <span class="token operator">=</span> this.refs<span class="token punctuation">;</span>   // 返回该元素
        alert<span class="token punctuation">(</span>myInput.value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span> /* 通过 ref属性绑定这个 input标签 */ <span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token assign-left variable">ref</span><span class="token operator">=</span><span class="token string">&quot;myInput&quot;</span> <span class="token assign-left variable">placeholder</span><span class="token operator">=</span><span class="token string">&quot;search something&quot;</span> /<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>/* 事件绑定会在下面讲 */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.showData<span class="token punctuation">}</span><span class="token operator">&gt;</span>Show Data<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h6 id="_2-回调形式的-refs"><a href="#_2-回调形式的-refs" class="header-anchor">#</a> (2) 回调形式的 refs</h6> <p>其实很简单，但在后来的版本中，官方觉得这样做有问题，于是推出了全新的版本：使用回调函数来操作 refs</p> <div class="language-bash extra-class"><pre class="language-bash"><code>class Demo extends React.Component<span class="token punctuation">{</span>

    <span class="token function-name function">showData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        const <span class="token punctuation">{</span>myInput<span class="token punctuation">}</span> <span class="token operator">=</span> this<span class="token punctuation">;</span>   // 返回该元素
        alert<span class="token punctuation">(</span>myInput.value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>/* 回调函数的参数为该元素本身，通过函数绑定在 this上 */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token assign-left variable">ref</span><span class="token operator">=</span><span class="token punctuation">{</span> e <span class="token operator">=</span><span class="token operator">&gt;</span> this.myInput <span class="token operator">=</span> e <span class="token punctuation">}</span> <span class="token assign-left variable">placeholder</span><span class="token operator">=</span><span class="token string">&quot;search something&quot;</span> /<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.showData<span class="token punctuation">}</span><span class="token operator">&gt;</span>Show Data<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h6 id="_3-createref-形式-推荐"><a href="#_3-createref-形式-推荐" class="header-anchor">#</a> (3) createRef 形式（推荐）</h6> <p>后来的 React 发现，使用回调函数的形式还是会出现一些不可言喻的问题，所以，又一次推出了全新的的方法来使用 refs，便是使用 React 身上的方法 createRef()</p> <div class="language-bash extra-class"><pre class="language-bash"><code>class Demo extends React.Component<span class="token punctuation">{</span>

    // 使用 React.createRef<span class="token punctuation">(</span><span class="token punctuation">)</span> 创建一个 ref容器
    myRef <span class="token operator">=</span> React.createRef<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    showData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        // 在容器中获取 DOM元素
        const <span class="token punctuation">{</span>current<span class="token punctuation">}</span> <span class="token operator">=</span> this.myRef<span class="token punctuation">;</span>
        alter<span class="token punctuation">(</span>current.value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>/* 将DOM元素绑定在容器中 */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>input <span class="token assign-left variable">ref</span><span class="token operator">=</span><span class="token punctuation">{</span>this.myRef<span class="token punctuation">}</span> <span class="token assign-left variable">placeholder</span><span class="token operator">=</span><span class="token string">&quot;点击提示数据&quot;</span> <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span>/<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.showData<span class="token punctuation">}</span><span class="token operator">&gt;</span>ShowData<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>    
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>注意：一个 ref 容器，只能存储一个元素（专人专用），后加入的会把前一个顶出去</p> <h5 id="函数式组件中使用-refs"><a href="#函数式组件中使用-refs" class="header-anchor">#</a> 函数式组件中使用 refs</h5> <ul><li>在 React16.8 前，与 state 相同，函数式组件也无法使用 refs 特性</li> <li>在 React16.8 后，出现了 Hook 函数，使得函数式组件也有了使用 refs 特性的能力</li></ul> <p>以下代码现阶段无需看懂先，了解即可。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    const <span class="token punctuation">[</span>count, setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React.useState<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-name function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        setCount<span class="token punctuation">(</span>count<span class="token operator">=</span><span class="token operator">&gt;</span> count+1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前求和：<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击加一<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="四、组件的事件绑定"><a href="#四、组件的事件绑定" class="header-anchor">#</a> 四、组件的事件绑定</h3> <h4 id="_1-在函数式组件中进行事件绑定"><a href="#_1-在函数式组件中进行事件绑定" class="header-anchor">#</a> 1. 在函数式组件中进行事件绑定</h4> <p>可以在函数中定义另外一个函数（内置函数）然后进行调用即可</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> Demo<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function-name function">showData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        alert<span class="token punctuation">(</span><span class="token string">&quot;触发了事件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>showData<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击触发<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-在类式组件中进行事件绑定"><a href="#_2-在类式组件中进行事件绑定" class="header-anchor">#</a> 2. 在类式组件中进行事件绑定</h4> <p>在类式组件中可以通过类本身的方法来调用</p> <div class="language-bash extra-class"><pre class="language-bash"><code>class Demo extends React.Component<span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span> count: <span class="token number">0</span> <span class="token punctuation">}</span>    // 定义 state
    <span class="token function-name function">showData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        alert<span class="token punctuation">(</span><span class="token string">&quot;触发了事件&quot;</span><span class="token punctuation">)</span>
        console.log<span class="token punctuation">(</span>this.state.count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span> 报错
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.showData<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
        // 成功弹出弹窗，但是输出报错
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>这里你会发现，虽然成功 alter，但是输出 state 会报错，这是为什么呢？
平时在组件内使用 this.state 的时候，此时 this 的指向都是作用于类的原型对象，即类本身。
而在函数中，因为使用了 babel.js 的缘故，js 默认开启了严格模式，所以函数体的 this 为 undefined，自然找不到在原型对象上的 state。</p> <p>此时有两种解决方法：</p> <ul><li>使用 bind、apply 等方法改变 this 指向</li> <li>使用箭头函数，改变 this 指向（推荐）</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>class Demo extends React.Component<span class="token punctuation">{</span>
    constractor<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">{</span>
        super<span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        // this.showData <span class="token operator">=</span> this.showData.bind<span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>   // 方法1
    <span class="token punctuation">}</span>

    state <span class="token operator">=</span> <span class="token punctuation">{</span> count: <span class="token number">0</span> <span class="token punctuation">}</span>    // 定义 state
    showData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>    // 方法2
        alert<span class="token punctuation">(</span><span class="token string">&quot;触发了事件&quot;</span><span class="token punctuation">)</span>
        console.log<span class="token punctuation">(</span>this.state.count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span> 报错
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.showData<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
        // 成功弹出弹窗，但是输出报错
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-react-的事件处理方法"><a href="#_3-react-的事件处理方法" class="header-anchor">#</a> 3. React 的事件处理方法</h4> <p>通过 onXxx 属性指定事件处理函数（注意大小写</p> <ul><li>React 使用的是自定义（合成）事件，而不是原生的 DOM 事件（为了更好的兼容性）</li> <li>React 的事件是通过事件委托方式处理的（委托给组件最外层的元素）（为了更加的高效）</li> <li>可以通过事件的 event.target 获取发生的 DOM 元素对象，可以尽量减少 refs 的使用</li> <li>在绑定事件的时候不要加括号，这会被 jsx 识别为执行函数</li></ul> <h3 id="五、组件的生命周期"><a href="#五、组件的生命周期" class="header-anchor">#</a> 五、组件的生命周期</h3> <p>对 Vue 熟悉的应该对生命周期并不陌生。
组件在挂载到页面上的过程中，期间发生了许多的事情，而生命周期，可以看作是一个组件的执行流程，我们可以通过在某个流程节点中进行一些操作，而这就是 生命周期钩子（函数）
注：生命周期函数只适用于类式组件，并不适用于函数式组件，但是在 React16.8 之后的 Hook，也可以让函数式组件实现类似于生命周期钩子的功能</p> <h4 id="_1-react-16-之前"><a href="#_1-react-16-之前" class="header-anchor">#</a> 1. React 16 之前</h4> <img src="/vuepress-blogassets/img/03.c8702f2f.png"> <p>以下是流程：</p> <ul><li>自身组件挂载
<ul><li>constructor: 构造函数（初始化）</li> <li>componentWillMount: 组件挂载前</li> <li>render: 组件挂载中</li> <li>componentDidMount: 组件挂载完成后</li></ul></li> <li>拥有父组件且父组件状态进行更新（setState）：
<ul><li>父组件 shouldComponentUpdate: 父组件是否进行状态更新</li> <li>父组件 componentWillUpdate: 父组件状态更新前</li> <li>父组件 render: 父组件更新挂载中</li> <li>子组件 componentWillReceiveProps: 子组件将收到新的 Props</li> <li>子组件 shouldComponentUpdate: 子组件是否进行状态更新</li> <li>子组件 componentWillUpdate: 子组件状态更新前</li> <li>子组件 render: 子组件更新挂载中</li> <li>子组件 componentDidMount: 子组件挂载完成</li> <li>父组件 componentDidMount: 父组件挂载完成</li></ul></li> <li>当组件要进行卸载时：
<ul><li>componentWillUnmount: 组件卸载前</li></ul></li> <li>有几个需要注意的地方：
<ul><li>shouldComponentUpdate 的意思是是否更新状态，所以他应该有个布尔类型返回值，而且默认为 true（不写的时候），当你写了这个钩子时别忘了写个返回值，这个横眉周期一般用于进行更新值的一些判断。</li> <li>shouldComponentUpdate 有两个参数，分别是 nextProps：新的 props 与 nextState： 新的 state，此时他们都还没更新到组件上。</li> <li>使用 setState 时会经过生命周期 shouldComponentUpdate，但是使用 forceUpdate 时则不会，而是直接到 componentWillUpdate 生命周期</li></ul></li></ul> <h4 id="_2-react-16-之后"><a href="#_2-react-16-之后" class="header-anchor">#</a> 2. React 16 之后</h4> <img src="/vuepress-blogassets/img/04.60e43f59.png"> <ul><li>新旧生命周期对比：
<ul><li>在新的生命周期中，舍弃了（即将舍弃）三个生命周期函数：
<ul><li>componentWillMount</li> <li>componentWillReceiveProps</li> <li>componentWillUpdate</li></ul></li></ul></li> <li>新增了两个生命周期函数：
<ul><li>getDerivedStateFromProps</li> <li>getSnapshotBeforeUpdate</li></ul></li> <li>以下是流程：
<ul><li>自身组件挂载：
<ul><li>constructor: 构造函数（初始化）</li> <li>getDerivedStateFromProps: 从 props 中获取派生的 state</li> <li>render: 组件挂载中</li> <li>componentDidMount: 组件完成挂载</li></ul></li> <li>父组件更新时
<ul><li>父组件 getDerivedStateFromProps: 从 props 中获取派生的 state</li> <li>父组件 shouldComponentUpdate: 判断是否进行状态更新</li> <li>父组件 render: 父组件挂载中</li> <li>子组件 getDerivedStateFromProps: 从 props 中获取派生的 state</li> <li>子组件 shouldComponentUpdate: 判断是否进行状态更新</li> <li>子组件 render: 子组件挂载中</li> <li>子组件 getSnapshotBeforeUpdate: 子组件获取状态更新前的快照</li> <li>子组件 componentDidUpdate: 子组件完成更新</li> <li>父组件 getSnapshotBeforeUpdate: 父组件获取状态更新前的快照</li> <li>父组件 componentDidUpdate: 父组件完成更新</li></ul></li> <li>组件卸载时
<ul><li>componentWillUnmount: 组件卸载前</li></ul></li></ul></li> <li>也有几个需要注意的地方：
<ul><li>getDerivedStateFromProps 需要定义个实例本身，所以是静态方法</li> <li>getDerivedStateFromProps 有两个参数，分别是当前的 props 和 state</li> <li>若需要组件的状态任何时候都取决于 props 则可以使用 getDerivedStateFromProps，但是使用场景比较罕见，可以在其中定义 state</li> <li>getSnapshotBeforeUpdate 有两个参数，分别为状态更新前的 props 和 state，并且有一个返回值（快照），一般用作本次更新情况的说明情况。</li> <li>componentDidUpdate 有三个参数，分别为状态更新前的 props 和 state，以及先前 getSnapshotBeforeUpdate 返回的快照。</li> <li>其他的与旧的生命周期没有什么差别</li></ul></li></ul> <h3 id="六、组件列表渲染、条件渲染与-dom-的-diffing-算法"><a href="#六、组件列表渲染、条件渲染与-dom-的-diffing-算法" class="header-anchor">#</a> 六、组件列表渲染、条件渲染与 DOM 的 Diffing 算法</h3> <h4 id="_1-组件列表渲染"><a href="#_1-组件列表渲染" class="header-anchor">#</a> 1. 组件列表渲染</h4> <p>在有时候我们需要批量的去创建一些 DOM 元素或组件，比如页面上的：新闻列表、推文列表、好友列表等等，你会发现在开发的过程中经常会使用到列表，但是自己一个个的去写 DOM 回十分繁琐。
我们可以通过数组存储数据，也可以使用数组来循环渲染数据。
举个例子：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>class Demo extends React.Component<span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        arr: <span class="token punctuation">[</span>a, b, c<span class="token punctuation">]</span>,
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        // 输出 abc
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span> <span class="token punctuation">{</span>stus<span class="token punctuation">}</span> <span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你会发现，React 输出数组会把所有的元素直接循环输出出来，那么我们只要在每个元素左右添加上标签，那不就构成了列表渲染吗？
这里我们可以通过 jsx 语法配合 ES6 语句来实现列表渲染。
直接上代码</p> <div class="language-bash extra-class"><pre class="language-bash"><code>class Demo extends React.Component<span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        stus: <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>id: <span class="token string">&quot;001&quot;</span>, name: <span class="token string">&quot;小明&quot;</span>, age: <span class="token string">&quot;28&quot;</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>id: <span class="token string">&quot;002&quot;</span>, name: <span class="token string">&quot;小红&quot;</span>, age: <span class="token string">&quot;26&quot;</span><span class="token punctuation">}</span>,
        <span class="token punctuation">]</span>,
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>
                        this.state.stus.map<span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
                            <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>li <span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token punctuation">{</span>item.id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item.name<span class="token punctuation">}</span>---<span class="token punctuation">{</span>item.age<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAABXCAYAAABfoTq7AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAUXSURBVHic7d07cqNaFIXhxa0einQDl0eARiA5uVGnzlAoEmcOO3MCocmcduTEaATSCFwdNMzl3AD0AG29LNmA+b8qqrpAbR9cLDZH9tnynHNOACr+aXoAQBsRDMBAMAADwQAMBAMwEAzAQDAAA8EADAQDMBAMwEAwAAPBAAwEAzAQDMBAMAADwQAMBAMwEAzAQDAAA8EADAQDMBAMwEAwAAPB2GuuqedpOv/Y/87jkTzP291GsfLrDhSfgGBcJFc8OnDhB6mcc5stDRoaZxHy7XGOYiOe82n1XD56V/gGCMYVBGnTF/5h8+lE71FWCegyHFbDMZ/KmySbc8ki+cmkt+EgGGvF3d+8kx481n7jZ6fFbLC9Q2kgLX+/ravb/DWR/EgP43LHYKaXyJeSV/UxGgRjJX/T72Wgx+0LaG2g2WOgZXivs7KRTKqPJpPkWqO9uuGNbx/wbzT82qG0AsEozZ9CKXrQeN8Lxg+K/KXCp937ZzLZc+G3Zo5Rk8f6lUj+zzutbgOD2YsihVqfXh7rPpSil5msW8V3RzCk8kLx9fPu0CUw0OyleO6uP3a3fY5RkccaDUMt/UgvleqY6c9yK+TDUMvGBtm8Tgdj9YhyqaJavMh8ito2mOkxkJJfx99yzYqr7IxHqfo7XKPyse3c/Qe+QzwqLng/UrbYrgS54tFEiQKl6wqXFRVyOO3lHEOuoyRVtg/LIucrcOnOgdQFkgvqB7LI+ev9mYv8rdekgZMfuay+39WPf7ViPLLOx7naOZ2wvwc6XTGu4ejcom5VNV4399GdOUY5kf/v5C/6uebTocJlUQ2eWzKm1ms6mZfQpdXioD0Vo8KqDMU+PzLqQiMV45TzcC4NVBtbWWUaqXDN+9F0MC/hGv+UtIFmi+0x5IpHQ4WKlB2dsHyR/K/eJS0nnnZnOL6ibKHZoPhdRxaPNPTCzeEgletriWk6ma1SPlNrtZ17t0wDp/p8JQ0qcyGzkqB1POcav+0CrdP7yTdgIRiAgWAABoIBGAgGYCAYgIFgAAaCARgIBmAgGICBYAAGggEYCMZe53Qi7HZ7HewiGNcwf1K4br2z2/Wvvn19D7MTOxFKdCNcafrv3tvrtJVv9iq+raOR79Twouk0qK0DKdeI1NeGpIF215P0FBVj7WOdCPP4XuFtqudx2YWjhU2bT+lEqPlUkyRQ6p5PX//+jXV6aetVrToRLvZ3Igwn94rvFps2O3ms+/BWqRtv/bubDcrmr4n8KCMUpU5WjGv1k9r2kU6E+dtvLZVo4nnyhn/02JW77U4nwrleE+n2X1V7VbWw+n2Zpp/lzqVr9ZPalkXOl++qj9zGHGNPn6U02r82vA1zjIrVuvbKevbiXFX5GfS7SwjBcMbktNhrTr6rbWY2jcy0p4HC6cGof63VRXru/gPfIfLtJg9lWHZ+Bj1uuNa5YDh35X5Sl3QiXHUAOXDltKNiHOlEeFLXxX7p5BzDlf1Vr+GiToTj52IsLe+9dLwT4VA3vvT+15pR+Lrp4+cANBzMFjv19xgr9jN58xXjxPMoq9/mdeW8o4/lwnW8E2ErlB/RVXT1c3Jte6/2xE6EGj/LZTcaDT2t3++jEyGcc2d3Iswi3+73qiNbT9/p6RI6EQKGTk6+gc9GMAADwQAMBAMwEAzAQDAAA8EADAQDMBAMwEAwAAPBAAwEAzAQDMBAMAADwQAMBAMwEAzAQDAAA8EADAQDMBAMwEAwAAPBAAz/AyLPxTDQTHMrAAAAAElFTkSuQmCC">
#### 2. key 的使用
<p>有的人发现了写列表渲染的时候，我都会给每个标签加上一个 key 属性，这是为什么呢？
其实 key 的作用是给当前的标签添加一个唯一的标识，用于给 React 进行 diffing 算法计算的时候使用</p> <h4 id="_3-diffing-算法"><a href="#_3-diffing-算法" class="header-anchor">#</a> 3. diffing 算法</h4> <p>当状态发生改变时，react 会根据【新的状态】生成【新的虚拟 DOM】
然后将新旧虚拟 DOM 进行  diff 比较，比较规则如下：</p> <ul><li><p>旧虚拟 DOM  中找到了与   新虚拟 DOM  相同的  key</p> <ul><li>若虚拟 DOM 中的内容没变，则直接使用之前的真实 DOM</li> <li>若虚拟 DOM 中的内容变了，则生成新的真实 DOM 并进行替换</li></ul></li> <li><p>旧虚拟 DOM  中未找到与   新虚拟 DOM  相同的  key，则根据数据创建新的真实 DOM，然后渲染到页面用</p></li></ul> <p>index 作为 key 可能引发的问题</p> <ul><li>对数据进行 逆序添加、逆序删除 邓破坏顺序的操作 会产生没有必要的真实 DOM 更新，影响效率</li> <li>对结构中包含输入类的 DOM 会产生错误的 DOM 更新，同时界面渲染有问题</li> <li>若仅用于展示数据，那用 index 作为 key 则没有问题</li></ul> <h3 id="七、react-脚手架"><a href="#七、react-脚手架" class="header-anchor">#</a> 七、React 脚手架</h3> <p>恭喜，终于熬到了脚手架这里了，终于可以一键生成所有东西而不是自己一个个引用了。
什么是脚手架呢？ 脚手架可以说是建房子时的构架，其他人已经帮你吧房子的架构搭好了，不需要自己动手。
而 React 就有自己的脚手架，开发团队通过 webpack，babel、npm 等方法，帮你搭建好了一个使用 React 开发软件的环境，不再需要自己去创建文件夹，导入 React 等重复的操作，更加利于我们编写 SPA 应用（单页面富应用）。</p> <h4 id="_1-安装-react-脚手架"><a href="#_1-安装-react-脚手架" class="header-anchor">#</a> 1. 安装 React 脚手架</h4> <p>在自己的命令行窗口中输入（需要现有 node 环境）：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i create-react-app <span class="token parameter variable">-g</span>
</code></pre></div><p>全局安装 create-react-app 脚手架</p> <h4 id="_2-创建-react-应用"><a href="#_2-创建-react-应用" class="header-anchor">#</a> 2. 创建 React 应用</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>create-create-app 应用名称
</code></pre></div><ul><li>应用名称不应该出现大写字母和特殊字符</li> <li>使用英文命名而不是中文命名</li></ul> <h4 id="_3-文件解析"><a href="#_3-文件解析" class="header-anchor">#</a> 3. 文件解析</h4> <p>项目文件中比较常用的文件就以下这些：</p> <ul><li>node_modules ------ npm 包的存放位置</li> <li>public ------ 用于存放静态文件</li> <li>src ------ 项目的代码存放位置
<ul><li>components ------ 用于存放公用组件的文件夹</li> <li>page ------ 用于存放页面的文件夹</li> <li>App.js ------ 根组件</li> <li>App.css ------ 根组件的样式</li> <li>index.js ------ 项目入口文件</li> <li>index.css ------ 项目的公用样式</li></ul></li> <li>.gitgnore ------ 编写 git 的配置文件</li> <li>package.json ------ 项目配置文件</li> <li>README.md ------ 项目信息</li></ul> <p>还记得我们的讲组件化的图片吗</p> <p>{% asset_img 01.png This is an image %}</p> <p>其中的 APP 就是根组件，通过我们编写其他的组件如 Header、Aside 等组件，都加装在根组件上。</p> <h4 id="_4-npm-指令"><a href="#_4-npm-指令" class="header-anchor">#</a> 4. npm 指令</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> start       // 使用 webpack-dev-server 启动服务查看应用
<span class="token function">npm</span> build       // 打包生成生产文件
<span class="token function">npm</span> <span class="token builtin class-name">test</span>        // 进行软件测试（不常用）
<span class="token function">npm</span> <span class="token function">eject</span>       // 将所有的配置文件暴漏出来（不常用且不建议用）
</code></pre></div><h3 id="八、react-router-的使用"><a href="#八、react-router-的使用" class="header-anchor">#</a> 八、react-router 的使用</h3> <h4 id="_1-什么是-react-router"><a href="#_1-什么是-react-router" class="header-anchor">#</a> 1. 什么是 react-router</h4> <p>react-router 是为了 React 编写 SPA 应用操作前端路由而诞生的。</p> <h5 id="_1-前端路由-可能有点直白"><a href="#_1-前端路由-可能有点直白" class="header-anchor">#</a> (1) 前端路由（可能有点直白）</h5> <p>前端路由是通过 HTML5 的新 API History 来操作的，其原理就是 url 地址的地址发生改变，但是并不会触发重新加载，同时 javascript 可以监听到改变。
有两种类型：</p> <ul><li>HashRouter: 利用 url 地址栏的 # 后面的哈希值
https://www.baidu.com/#/a/b</li> <li>BrowserRouter: 利用浏览器的 History API，地址栏中不包含 # ，显得更加美观</li></ul> <p>https://www.baidu.com/a/b</p> <p>以上两种情况都不会触发 url 的跳转功能</p> <h5 id="_2-spa-应用"><a href="#_2-spa-应用" class="header-anchor">#</a> (2) SPA 应用</h5> <p>SPA 全称 Single Page web Application，顾名思义是只有一个页面的应用，通过 javascript 进行实时的渲染来更新页面。
即通过当前的路由来判断页面应该加载什么组件，从而呈现不同的页面与效果。</p> <h4 id="_2-使用-react-router"><a href="#_2-使用-react-router" class="header-anchor">#</a> 2. 使用 react-router</h4> <h5 id="_1-安装与使用"><a href="#_1-安装与使用" class="header-anchor">#</a> (1) 安装与使用</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i react-router-dom <span class="token parameter variable">-S</span>
</code></pre></div><p>注意：我们下载的是 react-router-dom 而不是 react-router
两者区别：</p> <ul><li>react-router：提供了 router 的核心 API。如 Router、Route、Switch 等，但没有提供有关 dom 操作进行路由跳转的 API；</li> <li>react-router-dom：提供了 BrowserRouter、Route、Link 等 api，可以通过 dom 操作触发事件控制路由。</li></ul> <p>react-router-dom 中包含了 react-router，所以我们选择下 react-router-dom。</p> <h5 id="_2-常用组件"><a href="#_2-常用组件" class="header-anchor">#</a> (2) 常用组件</h5> <h6 id="a-路由跳转"><a href="#a-路由跳转" class="header-anchor">#</a> a. 路由跳转</h6> <p>在多页面应用中，通常都是使用 a 标签进行页面跳转</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://localhost:3000&quot;</span><span class="token operator">&gt;</span>跳转页面<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
</code></pre></div><p>使用单页面富应用中使用 react-router 则使用路由跳转组件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span>Link, NavLink<span class="token punctuation">}</span> from <span class="token string">&quot;react-router&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>Link <span class="token assign-left variable">activeClassName</span><span class="token operator">=</span><span class="token string">&quot;nav-active&quot;</span> <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;nav&quot;</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>NavLink <span class="token assign-left variable">activeClassName</span><span class="token operator">=</span><span class="token string">&quot;nav-active&quot;</span> <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;nav&quot;</span> <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;/home&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span>/NavLink<span class="token operator">&gt;</span>

</code></pre></div><ul><li>activeClassName: 处于当前路由时，对应的组件会自动添加该类</li> <li>className: 当前组件类名</li> <li>to: 当前组件所对应的路由</li></ul> <p>Link 组件与 NavLink 组件都可以进行路由的跳转，区别在于：当前路由对应的 NavLink 会自动添加 class: active，而 Link 不会。</p> <h6 id="b-注册路由"><a href="#b-注册路由" class="header-anchor">#</a> b. 注册路由</h6> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span>Route<span class="token punctuation">}</span> from <span class="token string">&quot;react-router&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>Route <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/Route<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Route exact <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/Route<span class="token operator">&gt;</span>
</code></pre></div><ul><li>path: 所要监听的路由</li> <li>component: 该路由要绑定的组件</li> <li>exact: 可选，不写时为 false，是否选择严格匹配
当当前路由对应上了路由组件所绑定的路由时，则会展示所绑定的组件。</li></ul> <p>(a) 路由严格匹配与模糊匹配
路由不仅仅只有一级，有的时候是有多级嵌套的，比如以下这张：</p> <p>https://www.baidu.com/a/b/c/d</p> <p>模糊匹配和严格匹配，都是指当前的组件对当前路由的匹配模式：</p> <ul><li><p>模糊匹配: 如果当前路由与匹配的路由成相等或包含（注意层级）的情况，则启用该组件</p> <ul><li>http://localhost:3000/home/a/b/c 则为包含路由 /home</li> <li>http://localhost:3000/a/b/home/c 则为不包含路由 /home（层级不对）</li></ul></li> <li><p>严格匹配: 如果当前路由与匹配的路由相等的话，才启用该组件</p> <ul><li>http://localhost:3000/home 则为与路由 /home 相等</li> <li>http://localhost:3000/home/a 则为与路由 /home 不相等</li></ul></li></ul> <h5 id="c-重定向路由"><a href="#c-重定向路由" class="header-anchor">#</a> c. 重定向路由</h5> <p>你明明设置好了路由 /home，但是有的用户就喜欢对着干，在地址栏输入了 /nothing，而你没有注册这个路由，那该怎么办呢？
这个时候你就可以东涌道重定向路由了，对于没有注册过的路由，都会被跳转到你指定的某个路由去，这就是重定向路由。
经常可以用作一些 404，页面丢失等情况的路由跳转方式。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span>Redirect, Route<span class="token punctuation">}</span> from <span class="token string">&quot;react-router&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>Route <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>/<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Route <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>/<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Redirect <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;/home&quot;</span>/<span class="token operator">&gt;</span>
</code></pre></div><ul><li>to: 需要重定向到哪个路由？
Redirect 需放在所有 Route 下面，当上面的 Route 都没有匹配到时，则路由将重定向到指定的路由。</li></ul> <h6 id="d-switch-路由"><a href="#d-switch-路由" class="header-anchor">#</a> d. Switch 路由</h6> <p>你想想，如果你的路由中，出现了 /home 与 /home/abc 和 /home/a/b/c 等这样的路由，当路由为 /home 时则会三个路由都同时渲染，但是你又只想要渲染其中的一条，这个时候我们就可以使用 Switch 组件。
使用 Switch 组件包裹住所有的 Route 和 Redirect，当出现多个匹配的路由时，只会渲染第一个匹配的组件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span>Switch, Route, Redirect<span class="token punctuation">}</span> from <span class="token string">&quot;react-router&quot;</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route <span class="token punctuation">..</span><span class="token punctuation">..</span>/<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route <span class="token punctuation">..</span><span class="token punctuation">..</span>/<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Redirect <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;...&quot;</span>/<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/Switch<span class="token operator">&gt;</span>
</code></pre></div><h6 id="e-路由器"><a href="#e-路由器" class="header-anchor">#</a> e. 路由器</h6> <p>你想要使用路由跳转组件和路由组件，还差一个路由器组件，同时路由器组件必须包裹着这两个组件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span>HashRouter, BrowserRouter<span class="token punctuation">}</span> from <span class="token string">&quot;react-router&quot;</span><span class="token punctuation">;</span>

</code></pre></div><p>一般为了使整个 React 应用都可以使用到路由组件，所以一般我们都是把路由器包裹在根组件上的。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ReactDOM.render<span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>App/<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/BrowserRouter<span class="token operator">&gt;</span>,
    document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>有两种路由器组件，分别是 HashRouter 与 BrowserRouter，分别对应者两种路由方式。</p> <h5 id="_3-路由组件"><a href="#_3-路由组件" class="header-anchor">#</a> (3) 路由组件</h5> <p>路由组件与一般组件</p> <ul><li><p>写法不同</p> <ul><li>一般组件：<code>&lt;Demo&gt;&lt;/Demo&gt;</code></li> <li>路由组件：<code>&lt;Route path=&quot;/demo&quot; component={Demo}&gt;&lt;/Route&gt;</code></li></ul></li> <li><p>存放位置不同</p> <ul><li>一般组件：components 文件夹</li> <li>路由组件：page 文件夹</li></ul></li> <li><p>接受到的 props 不同</p> <ul><li>一般组件：根据组件标签传递了上面，就收到了什么</li> <li>路由标签：会收到三个固定的属性</li></ul></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;history&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;length&quot;</span><span class="token builtin class-name">:</span> <span class="token number">18</span>,
    <span class="token string">&quot;action&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;PUSH&quot;</span>,
    <span class="token string">&quot;location&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;pathname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/home&quot;</span>,
      <span class="token string">&quot;search&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
      <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
      <span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;tvfyve&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;location&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;pathname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/home&quot;</span>,
    <span class="token string">&quot;search&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
    <span class="token string">&quot;hash&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
    <span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;tvfyve&quot;</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/home&quot;</span>,
    <span class="token string">&quot;url&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/home&quot;</span>,
    <span class="token string">&quot;isExact&quot;</span><span class="token builtin class-name">:</span> true,
    <span class="token string">&quot;params&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 

</code></pre></div><h4 id="_3-嵌套路由"><a href="#_3-嵌套路由" class="header-anchor">#</a> 3.嵌套路由</h4> <p>假设我们有个路由组件为 Home，在根组件中使用 Link跳转到了该路由，当前路由为 /home，可在组件 Home 中还有两个 Link，分别导向路由 /home/message 与 /home/news 然后在组件中还有其他的路由组件。这就时嵌套路由的使用。
如下面的代码</p> <div class="language-bash extra-class"><pre class="language-bash"><code>class Home extends Component<span class="token punctuation">{</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;/home/message&quot;</span><span class="token operator">&gt;</span>Message<span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;/home/news&quot;</span><span class="token operator">&gt;</span>News<span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>hr/<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/home/message&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>Message<span class="token punctuation">}</span> /<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route path <span class="token operator">=</span><span class="token string">&quot;/home/news&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>News<span class="token punctuation">}</span> /<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-编程式路由"><a href="#_4-编程式路由" class="header-anchor">#</a> 4. 编程式路由</h4> <p>如果说，我们想要做用户点击按钮登陆后，如果他是老师就去老师页面，如果是学生就去学生页面，这个显然单靠 Link 无法完成，我们可以通过 js进行路由的跳转（也是 react-router 基于 History API 编写的）</p> <div class="language-bash extra-class"><pre class="language-bash"><code>class Message extends Component <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        messageArr:<span class="token punctuation">[</span>
            <span class="token punctuation">{</span>id:<span class="token string">&quot;01&quot;</span>, title: <span class="token string">&quot;消息1&quot;</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>id:<span class="token string">&quot;02&quot;</span>, title: <span class="token string">&quot;消息2&quot;</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>id:<span class="token string">&quot;03&quot;</span>, title: <span class="token string">&quot;消息3&quot;</span><span class="token punctuation">}</span>,
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    // 编程式路由导航
    pushShow <span class="token operator">=</span> <span class="token punctuation">(</span>id, title<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        // push跳转 + 携带 params参数
        this.props.history.push<span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>/home/message/detail/$<span class="token punctuation">{</span>id<span class="token punctuation">}</span>/$<span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        // push跳转 + 携带 search参数
        // this.props.history.push<span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>/home/message/detail?id<span class="token operator">=</span>$<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&amp;</span><span class="token assign-left variable">title</span><span class="token operator">=</span>$<span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        // push跳转 + 携带 state参数
        // this.props.history.push<span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>/home/message/detail<span class="token variable">`</span></span>, <span class="token punctuation">{</span>id,title<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    replaceShow <span class="token operator">=</span> <span class="token punctuation">(</span>id, title<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        // replace跳转 + 携带 params参数
        this.props.history.replace<span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>/home/message/detail/$<span class="token punctuation">{</span>id<span class="token punctuation">}</span>/$<span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        // replace跳转 + 携带 search参数
        // this.props.history.replace<span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>/home/message/detail?id<span class="token operator">=</span>$<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&amp;</span><span class="token assign-left variable">title</span><span class="token operator">=</span>$<span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        // replace跳转 + 携带 state参数
        // this.props.history.replace<span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>/home/message/detail<span class="token variable">`</span></span>, <span class="token punctuation">{</span>id, title<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // 后退
    goBack <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        this.props.history.goBack<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // 前进
    goForward <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        this.props.history.goForward<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // 跳转指定位置
    go <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        // 向前两步
        this.props.history.go<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        // 后退两步
        this.props.history.go<span class="token punctuation">(</span>-2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        const <span class="token punctuation">{</span>messageArr<span class="token punctuation">}</span> <span class="token operator">=</span> this.state<span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>
                        messageArr.map<span class="token punctuation">(</span>item<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
                            <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
                            <span class="token operator">&lt;</span>li <span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token punctuation">{</span>item.id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token variable"><span class="token variable">`</span>/home/message/detail/$<span class="token punctuation">{</span>item.id<span class="token punctuation">}</span>/$<span class="token punctuation">{</span>item.title<span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item.title<span class="token punctuation">}</span><span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span>
                                <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> this.pushShow<span class="token punctuation">(</span>item.id, item.title<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>push查看<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
                                <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> this.replaceShow<span class="token punctuation">(</span>item.id, item.title<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>replace查看<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                            <span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>hr/<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Route <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/home/message/detail/:id/:title&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span> /<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.goBack<span class="token punctuation">}</span><span class="token operator">&gt;</span>goBack<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
                <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.goForward<span class="token punctuation">}</span><span class="token operator">&gt;</span>goForward<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
                <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.go<span class="token punctuation">}</span><span class="token operator">&gt;</span>go<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>总结一下上面的代码：</p> <ol><li><p>编程式路由都是通过 props中的 history对象进行操作（都是该对象身上的方法，调用方式为：this.props.history.xxx）</p></li> <li><p>常用方法：</p> <ul><li>push(route[, state]): 跳转到指定路由（带有历史记录）</li> <li>replace(route[, state]): 跳转到指定路由（不带有历史记录）</li> <li>goBack(): 后退一个</li> <li>goForward(): 前进一个</li> <li>go(num): 前往指定步数，当 num为正数时，为前进，当 num为负数时则为后退。</li></ul></li></ol> <h4 id="_5-withrouter-组件"><a href="#_5-withrouter-组件" class="header-anchor">#</a> 5. withRouter 组件</h4> <p>有的时候，我们想要在其他组件中也使用路由组件的功能，比如导航栏，应该属于公用组件，但是里面的导航链接的功能却是路由组件的功能，我们应该怎么解决呢？
在 react-router 中，提供了这么一种方法，可以让一般组件具有路由组件的功能，则就是 withRouter() 方法。
看看演示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span>withRouter<span class="token punctuation">}</span> from <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

class Header extends Component <span class="token punctuation">{</span>
    // withRouter后该组件也有了路由组件的功能
    goBack <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        this.props.history.goBack<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    go <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        this.props.history.go<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    goForward <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        this.props.history.goForward<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>This is a React-router-dom Test<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.goBack<span class="token punctuation">}</span><span class="token operator">&gt;</span>goBack<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
                <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.goForward<span class="token punctuation">}</span><span class="token operator">&gt;</span>goForward<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
                <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.go<span class="token punctuation">}</span><span class="token operator">&gt;</span>go<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

// withRouter 用于给一般组件添加上路由组件特有的功能，返回一个新组件
<span class="token builtin class-name">export</span> default withRouter<span class="token punctuation">(</span>Header<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="九、路由组件之间的参数传递"><a href="#九、路由组件之间的参数传递" class="header-anchor">#</a> 九、路由组件之间的参数传递</h3> <p>父子组件之间的内容传递，可以通过 props来进行参数传递，但是路由组件却没有自己的标签，那么该如何进行参数的传递呢？
还记得路由组件特有的 props吗，我们可以利用 History API的一些特性来进行路由组件之间的参数传递，有三种方法。</p> <ul><li>params</li> <li>search</li> <li>state</li></ul> <h4 id="_1-传递-params-参数"><a href="#_1-传递-params-参数" class="header-anchor">#</a> 1. 传递 params 参数</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>// 父组件
class Parent extends Component <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        messageArr:<span class="token punctuation">[</span>
            <span class="token punctuation">{</span>id:<span class="token string">&quot;01&quot;</span>, title: <span class="token string">&quot;消息1&quot;</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>id:<span class="token string">&quot;02&quot;</span>, title: <span class="token string">&quot;消息2&quot;</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>id:<span class="token string">&quot;03&quot;</span>, title: <span class="token string">&quot;消息3&quot;</span><span class="token punctuation">}</span>,
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        const <span class="token punctuation">{</span>messageArr<span class="token punctuation">}</span> <span class="token operator">=</span> this.state<span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token punctuation">{</span>
                 messageArr.map<span class="token punctuation">(</span>item<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
                    // 向路由组件传递 params参数
                    <span class="token builtin class-name">return</span> <span class="token operator">&lt;</span>li <span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token punctuation">{</span>item.id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token variable"><span class="token variable">`</span>/home/message/detail/$<span class="token punctuation">{</span>item.id<span class="token punctuation">}</span>/$<span class="token punctuation">{</span>item.title<span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item.title<span class="token punctuation">}</span><span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>hr/<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>/* 声明接受 params参数，可以在 props中的 match属性的 params属性里获得 */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Route <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/home/message/detail/:id/:title&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>Child<span class="token punctuation">}</span> /<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>// 子组件
class Child extends Component <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        contentArr:<span class="token punctuation">[</span>
            <span class="token punctuation">{</span>id:<span class="token string">&quot;01&quot;</span>, content: <span class="token string">&quot;你好中国&quot;</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>id:<span class="token string">&quot;02&quot;</span>, content: <span class="token string">&quot;你好世界&quot;</span><span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>id:<span class="token string">&quot;03&quot;</span>, content: <span class="token string">&quot;你好帅哥&quot;</span><span class="token punctuation">}</span>,
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span>this.props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        // 获取 params参数
        const <span class="token punctuation">{</span>id, title<span class="token punctuation">}</span> <span class="token operator">=</span> this.props.match.params
        const findResult <span class="token operator">=</span> this.state.contentArr.find<span class="token punctuation">(</span>obj<span class="token operator">=</span><span class="token operator">&gt;</span>obj.id <span class="token operator">==</span> <span class="token function">id</span><span class="token punctuation">)</span>.content<span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>ID: <span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>TITLE: <span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>CONTENT: <span class="token punctuation">{</span>findResult<span class="token punctuation">}</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>/ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在使用 params传递参数时，你会清楚的看到参数以路由的形式展现了出来，例如：</p> <ul><li>http://localhost:3000/home/message/用户1/文章32</li></ul> <p>类式上面的用户1和文章32，这就是传递的参数。
以params方式传递的参数，在路由中需要声明接受才可以使用。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>Route <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/home/message/detail/:id/:title&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>Child<span class="token punctuation">}</span> /<span class="token operator">&gt;</span>
</code></pre></div><p>后面的 :id 与 :title 就是可变路由，可以通过props的match接受接收这里的内容.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const <span class="token punctuation">{</span>id, title<span class="token punctuation">}</span> <span class="token operator">=</span> this.props.match.params
</code></pre></div><h4 id="_2-传递-search-参数"><a href="#_2-传递-search-参数" class="header-anchor">#</a> 2. 传递 search 参数</h4> <p>这个就是依赖 get的请求方式。</p> <ul><li>http://localhost/home/message?id=1&amp;title=abc
即 javascript 可以获取到 url 中 ? 后面的请求体。 所以我们可以吧上面的 map 中返回的标签修改以下</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>li <span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token punctuation">{</span>item.id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token variable"><span class="token variable">`</span>/home/message/detail?id<span class="token operator">=</span>$<span class="token punctuation">{</span>item.id<span class="token punctuation">}</span><span class="token operator">&amp;</span><span class="token assign-left variable">title</span><span class="token operator">=</span>$<span class="token punctuation">{</span>item.title<span class="token punctuation">}</span><span class="token variable">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item.title<span class="token punctuation">}</span><span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
</code></pre></div><p>且这种方式不需要在路由中声明接收。
通过 props 中的 location 进行接收</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const search <span class="token operator">=</span> this.props.location.search<span class="token punctuation">;</span>
// 获取到的格式时： ?id<span class="token operator">=</span>xxx<span class="token operator">&amp;</span><span class="token assign-left variable">title</span><span class="token operator">=</span>xxx 所以还需要加工一下
const <span class="token punctuation">{</span>id, title<span class="token punctuation">}</span> <span class="token operator">=</span> qs.parse<span class="token punctuation">(</span>search.slice<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-传递-state-参数"><a href="#_3-传递-state-参数" class="header-anchor">#</a> 3. 传递 state 参数</h4> <p>通过 HistoryAPI来进行数据传输:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>li <span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token punctuation">{</span>item.id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>pathname: <span class="token variable"><span class="token variable">`</span>/home/message/detail<span class="token variable">`</span></span>, state:<span class="token punctuation">{</span>id:item.id, title:item.title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item.title<span class="token punctuation">}</span><span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/li<span class="token operator">&gt;</span>
</code></pre></div><p>不需要在路由链接中添加任何东西，也不需要路由进行声明接收。更加的美观。
在 props中的 location 里获取 state属性</p> <div class="language-bash extra-class"><pre class="language-bash"><code>const <span class="token punctuation">{</span>id, title<span class="token punctuation">}</span> <span class="token operator">=</span> this.props.location.state<span class="token punctuation">;</span>
</code></pre></div><h4 id="_4-三者对比"><a href="#_4-三者对比" class="header-anchor">#</a> 4. 三者对比</h4> <p>路由组件传参其实用的较少，因为他们都有对某些东西的依赖：</p> <ul><li>params: 依赖于路由链接，链接不美观</li> <li>search: 依赖于路由链接，链接不美观</li> <li>state: 依赖于历史记录 (HistoryAPI)，链接美观，但是当直接输入链接时则会报错（没有历史记录）</li></ul> <p>所以尽量使用其他的传参方式，如果非要使用的话，有限度比较为：</p> <ul><li>params (最为常用)</li> <li>search (较为常用)</li> <li>state (比较少用)</li></ul> <h3 id="十、redux-的使用"><a href="#十、redux-的使用" class="header-anchor">#</a> 十、redux 的使用</h3> <img src="data:image/png;base64,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ICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgNhQ6wEYTP8zcW89u+OXC67fuv+/64FNDQYCAAAiopJ2Rp+oh1/5q/p86zkAAICYx18BAACIiUoAAABiohIAAICYdyppZ+aJerbzxLwLf15burvqllbzAAAAl01U0o6DegAAoO95/BUAAICYqAQAACAmKgEAAIh5p5J2FhzUU1Vjz9eju+9tMg4AAHD5RCVNfH78p/XoeOspAACAxfL4KwAAADFRCQAAQExUAgAAEBOVAAAAxBzUAwDQQ2Z/NVcjv/xgwfWxL11bu/+owUAAFyEqAQB6zsrav211bWo9BsAl8PgrAAAAMVEJAABATFQCAAAQ804lAEDPOVmbnzs572/vWAK9S1QCAPQcEQn0D4+/AgAAEBOVAAAAxEQlAAAAMVEJAABAzEE9AAA9ZPj2NdW9vfUUAJfOphIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAIDbUegCWxvObf9R6BAAAYBmyqQQAACAmKgEAAIiJSgAAAGKiEgAAgJiDepahb+z/eusRAACAASEqAYCB0Xnud61HAFh2PP4KAABATFQCAAAQE5UAAADERCUAAAAxB/UAAMtSd9u1rUcAGAg2lQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMSGWg/Qj27ec3/rEQAAAHqCTSUAAAAxUQkAAEBMVAIAABATlQAAAMQc1HMRRx/Y23oEAACAnmVTCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABAbKj1AABAH3jxYOsJAOhRNpUAAADERCUAAAAxUQkAAEBMVAIAABBzUA8AcK4tG1pPAEAfsakEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiIlKAAAAYqISAACAmKgEAAAgJioBAACIiUoAAABiohIAAICYqAQAACAmKgEAAIiJSgAAAGKiEgAAgJioBAAAICYqAQAAiA21HmCx5m4YaT0CAADAwLKpBAAAINb3m0oA6HkHV7eeAAA+MzaVAAAAxEQlAAAAsb56/HXNW0dajwAAAMA8NpUAAADEOt1ut7uoG3Q6C64t8pYAAAA0kPSdTSUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBv6LG7a6XQ+i9sCAADQY2wqAQAAiIlKAAAAYqISAACAmKgEAAAgtuiDerrd7pWYAwAAgD5kUwkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQE5UAAADERCUAAAAxUQkAAEBMVAIAABATlQAAAMREJQAAADFRCQAAQExUAgAAEBOVAAAAxEQlAAAAMVEJAABATFQCAAAQ+z8PpSC2ryrDbAAAAABJRU5ErkJggg=="> <div class="language-bash extra-class"><pre class="language-bash"><code>假设我们的组件如同这张图一般，组件之间相互嵌套着。
这时候提出一个要求，在组件E中的数据，要给组件A和组件F使用，要怎么处理呢？
</code></pre></div><ul><li>方法1：通过不断的 props进行传参，但是这非常的费时费力</li> <li>方法2：使用 Pubsub.js等进行消息发布/订阅功能</li> <li>方法3：使用 react-redux进行数据集中式管理</li></ul> <p>即 redux可以看作一个管家，负责帮忙存储公共的数据。</p> <h4 id="_1-安装-redux"><a href="#_1-安装-redux" class="header-anchor">#</a> 1. 安装 redux</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i redux <span class="token parameter variable">-S</span>
</code></pre></div><h4 id="_2-核心概念"><a href="#_2-核心概念" class="header-anchor">#</a> 2. 核心概念</h4> <img src="/vuepress-blogassets/img/07.64002bd4.png"> <p>redux 有着三个核心概念</p> <ul><li><p>action:</p> <ul><li>动作的对象（操作内容）</li> <li>包含两个属性：
a. type: 表示属性，值为字符串，唯一，必要属性（要干嘛）
b. data: 数据属性，值为任意类型，可选属性（怎么干）</li> <li>例如：{ type: &quot;ADD_STUDENT&quot;, data: { name: &quot;tom&quot;, age: 18 } }</li></ul></li> <li><p>reducer:</p> <ul><li>用于初始化状态和加工状态（对数据进行初始化和操作数据的）</li> <li>加工时，根据旧的 state和 action，产生新的 state的纯函数</li> <li>有两个参数，一个为之前的状态（prevstate）与动作对象（action）</li></ul></li> <li><p>store:</p> <ul><li>将 state、action、reducer联系在一起的对象（大脑）</li></ul></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>我们大致可以把 redux的想象成一家餐厅，而我们就是顾客<span class="token punctuation">(</span> component<span class="token punctuation">)</span>，我们通过叫服务员<span class="token punctuation">(</span> action<span class="token punctuation">)</span>进行点餐等操作，服务员转达经理<span class="token punctuation">(</span> store<span class="token punctuation">)</span>后，经理吩咐后厨<span class="token punctuation">(</span> reducer<span class="token punctuation">)</span>进行做菜，然后把菜做好后由经理传递给顾客
</code></pre></div><h4 id="_3-基本使用"><a href="#_3-基本使用" class="header-anchor">#</a> 3. 基本使用</h4> <h5 id="_1-创建文件夹"><a href="#_1-创建文件夹" class="header-anchor">#</a> (1) 创建文件夹</h5> <p>在 src文件夹中创建 redux文件夹，用于存放 redux的相关内容</p> <ul><li>Compnoent ------ 存放组件相关的文件夹</li> <li>redux ------ 存放 redux相关内容的文件夹
<ul><li>actions ------ 存放 action相关内容的文件夹</li> <li>reducers ------ 存放 reducer相关内容的文件夹</li> <li>constant.js ------ 存放规范命名的文件</li> <li>store.js ------ 编写 store的文件
由我来一个个带你们解析。先写一个最简单的 redux</li></ul></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>/**
 * store.js
 * 该文件专门用于暴漏一个 store对象，整个应用只有一个 store对象
 */
// 引入 createStore，专门用于创建 redux中最为核心的 store
<span class="token function">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">}</span> from <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
// 引入为 Count组件服务的 reducer
<span class="token function">import</span> countReducer from <span class="token string">&quot;./count_reducer&quot;</span><span class="token punctuation">;</span>
const store <span class="token operator">=</span> createStore<span class="token punctuation">(</span>countReducer<span class="token punctuation">)</span>
// 暴露 store对象
<span class="token builtin class-name">export</span> default store<span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>/**
 * / reducer / count.js
 * <span class="token number">1</span>. 该文件是用于创建一个为 Count组件服务的 reducer，reducer的本质就是一个函数
 * 
 * <span class="token number">2</span>. reducer函数会收到两个参数，分别为：之前的状态（preState），动作对象（action）
 * 
 * <span class="token number">3</span>. 会自动调用一次 reducer<span class="token punctuation">(</span>初始化<span class="token punctuation">)</span>
 */
// 初始化的状态
const initState <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token builtin class-name">export</span> default <span class="token keyword">function</span> countReducer<span class="token punctuation">(</span>preState <span class="token operator">=</span> initState, action<span class="token punctuation">)</span><span class="token punctuation">{</span>
    if<span class="token punctuation">(</span>preState <span class="token operator">==</span><span class="token operator">=</span> undefined<span class="token punctuation">)</span> preState <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    // 从 action对象中获取 type，data
    const <span class="token punctuation">{</span>type, data<span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>
    // 根据 type觉得如何加工数据
    switch <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token builtin class-name">:</span> // data
            <span class="token builtin class-name">return</span> preState + data<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token builtin class-name">:</span> // 如果是减
            <span class="token builtin class-name">return</span> preState - data<span class="token punctuation">;</span>
        default:
            <span class="token builtin class-name">return</span> preState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>// / Component / Count.js 
<span class="token function">import</span> React, <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> from <span class="token string">'react'</span>
// 引入store
<span class="token function">import</span> store from <span class="token string">&quot;../../redux/store&quot;</span><span class="token punctuation">;</span>
<span class="token builtin class-name">export</span> default class Count extends Component <span class="token punctuation">{</span>
    // 加法
    increment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        const <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> this.selectNumber<span class="token punctuation">;</span>
        // 发送动作对象给 store
        store.dispatch<span class="token punctuation">(</span><span class="token punctuation">{</span>
            type: <span class="token string">&quot;increment&quot;</span>,
            data: value*1
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>当前求和为：<span class="token punctuation">{</span>store.getState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
                <span class="token operator">&lt;</span>select <span class="token assign-left variable">ref</span><span class="token operator">=</span><span class="token punctuation">{</span>c<span class="token operator">=</span><span class="token operator">&gt;</span>this.selectNumber <span class="token operator">=</span> c<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>option <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/option<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>option <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/option<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>option <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>/option<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>/select<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.increment<span class="token punctuation">}</span><span class="token operator">&gt;</span>+<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上就是最精简的 redux，让我们分析一下流程：</p> <ul><li><p>编写 Count组件，创建 Count组件对应的 Reducer文件</p></li> <li><p>编写 Reducer的代码并抛出：:</p> <ul><li>Reducer是个纯函数</li> <li>通常使用 Switch进行 action中的 type的判断</li> <li>函数返回值为修改后的值</li></ul></li> <li><p>创建 store并编写代码：</p> <ul><li>使用方法 createStore()方法来创建一个 store，参数是一个 reducer</li> <li>把编写好的 Count组件的 reducer导入</li></ul></li> <li><p>在组件中引入 store并进行调用：</p> <ul><li>在方法中通过使用 dspatch()方法向 store传递 action</li> <li>dispatch的参数时一个对象（即 action动作对象）</li></ul></li></ul> <h5 id="_2-使用流程"><a href="#_2-使用流程" class="header-anchor">#</a> (2) 使用流程</h5> <p>以上使创建的大致流程，而使用的大致流程是这样的：</p> <ul><li>store 初始化时自动调用了一次 reducer进行了值的初始化</li> <li>组件发出动 action 给 store，store进行判断后分发给对应的 reducer</li> <li>reducer根据 action里的 type对数据进行相应的处理后返回新的值</li> <li>store接收返回的新的值，并将旧的值替换掉</li> <li>通过方法 store.getState() 获取当前 store身上的值</li></ul> <h5 id="_3-使用异步redux"><a href="#_3-使用异步redux" class="header-anchor">#</a> (3) 使用异步redux</h5> <p>如果我们需要使用异步的 redux的话，还需要借助另一款插件： redux-thunk</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i redux-thunk <span class="token parameter variable">-S</span>
</code></pre></div><p>这是一个中间件，用于帮忙处理异步的 redux，
异步的 action的值为一个函数 在函数中进行普通的 dispatch() 操作</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> const createIncrementAsyncAction <span class="token operator">=</span> <span class="token punctuation">(</span>data, <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
    // 返回一个 action
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        setTimeout<span class="token variable"><span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span>{
            store.dispatch<span class="token punctuation">(</span>createIncrementAction<span class="token punctuation">(</span>data<span class="token punctuation">))</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>, <span class="token function">time</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>同时我们要在 store处设置让他支持执行中间件，通过 redux的 applyMiddleware() 方法就可以加载中间件，他的参数就是中间件，然后 applyMiddleware() 将作为 createStore() 的第二个参数引入。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// store.js
// 引入 applyMiddleware，专门用于执行中间件
<span class="token function">import</span> <span class="token punctuation">{</span>createStore, applyMiddleware<span class="token punctuation">}</span> from <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
// 引入为 Count组件服务的 reducer
<span class="token function">import</span> countReducer from <span class="token string">&quot;./count_reducer&quot;</span><span class="token punctuation">;</span>
// 引入 redux-thunk，用于支持异步 action
<span class="token function">import</span> thunk from <span class="token string">&quot;redux-thunk&quot;</span><span class="token punctuation">;</span>
// 暴露 store对象
<span class="token builtin class-name">export</span> default createStore<span class="token punctuation">(</span>countReducer, applyMiddleware<span class="token punctuation">(</span>thunk<span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_4-监听状态变化"><a href="#_4-监听状态变化" class="header-anchor">#</a> (4) 监听状态变化</h5> <p>你写着写着有没有发现，虽然 redux里面的状态确实更新了，但是页面并没有变化啊？
还记得页面渲染使用的是哪个函数吗？render()函数。可是在 redux状态发生变化时，并不会帮助我们调用 render()函数，所以我们需要手动实现实时渲染页面。
在这里我们使用到了 redux的 store上的 subscribe() 方法，用于监听 redux上状态的变化，参数是一个函数，便于我们进行操作。
一般我们都写在根标签上（精简些，不用再每个使用 redux的组件中都写一遍）</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> React from <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token function">import</span> ReactDOM from <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token function">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token function">import</span> App from <span class="token string">'./App'</span><span class="token punctuation">;</span>
<span class="token function">import</span> store from <span class="token string">&quot;./redux/store&quot;</span>
ReactDOM.render<span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>App /<span class="token operator">&gt;</span>,
  document.getElementById<span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
// 精简写法
store.subscribe<span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
  ReactDOM.render<span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>App /<span class="token operator">&gt;</span>,
    document.getElementById<span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-注意事项"><a href="#_4-注意事项" class="header-anchor">#</a> 4. 注意事项</h4> <ul><li>一般使用到 redux的话，需要使用的组件肯定不止一个，所以创建 actions和reducers用来存储多个 action 和 reducer</li> <li>同上，store肯定不止加载一个 reducer，所以我们使用 redux的 combineReducers()方法来整合所有的 reducer
<ul><li>combineReducers()方法的参数是一个对象，里面存放着所有的 reducer</li></ul></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token punctuation">{</span>createStore, applyMiddleware, combineReducers<span class="token punctuation">}</span> from <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token function">import</span> countReducer from <span class="token string">&quot;./reducers/count&quot;</span><span class="token punctuation">;</span>
<span class="token function">import</span> personReducer from <span class="token string">&quot;./reducers/person&quot;</span><span class="token punctuation">;</span>
<span class="token function">import</span> thunk from <span class="token string">&quot;redux-thunk&quot;</span><span class="token punctuation">;</span>
// 汇总所有的 reducer
const allReducer <span class="token operator">=</span> combineReducers<span class="token punctuation">(</span><span class="token punctuation">{</span>
    count: countReducer,
    persons: personReducer,
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin class-name">export</span> default createStore<span class="token punctuation">(</span>allReducer, applyMiddleware<span class="token punctuation">(</span>thunk<span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>因为 redux在设计上还有许多的问题，例如：</p> <ul><li>单个组件需要做：与 store打交道，获取数据，监听数据变化，派发 action对象等，一个组件负责的事情太多了。</li> <li>需要另外监听 redux的状态变化来更新状态并渲染页面。</li> <li>所以有人对 redux进行了优化，推出了另一个库 react-redux（放心，没啥不同，就是多了点优化，后面会讲）</li></ul></li> <li><p>能不使用 redux，就不要使用 redux（不管是 redux 还是 react-redux）</p></li> <li><p>能不使用 redux，就不要使用 redux（不管是 redux 还是 react-redux）</p></li> <li><p>能不使用 redux，就不要使用 redux（不管是 redux 还是 react-redux）</p></li></ul> <h3 id="十一、了解与使用-react-redux"><a href="#十一、了解与使用-react-redux" class="header-anchor">#</a> 十一、了解与使用 react-redux</h3> <p>前面也说了，react-redux 其实就是 redux的升级版，对许多地方进行了优化，但在学习他之前，需要我们进行一些对 redux的优化知识。</p> <img src="/vuepress-blogassets/img/08.8eafd9fd.png"> <h4 id="_1-使用容器组件和ui组件"><a href="#_1-使用容器组件和ui组件" class="header-anchor">#</a> 1. 使用容器组件和UI组件</h4> <p>其目的就是为了把组件身上太多的活进行拆分，分为UI组件（内组件）和容器组件（外组件），两个组件之间使用 props进行通信，对 store那边的请求状态，更改状态的活交给容器组件来干，而通过状态来编写页面，更新渲染等活，就交给 UI组件来干。
了解了这个后，就可以开始使用 react-redux了</p> <h4 id="_2-安装-react-redux"><a href="#_2-安装-react-redux" class="header-anchor">#</a> 2. 安装 react-redux</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i react-redux <span class="token parameter variable">-S</span>
</code></pre></div><h4 id="_3-创建文件夹"><a href="#_3-创建文件夹" class="header-anchor">#</a> 3. 创建文件夹</h4> <ul><li>对于容器组件，我们都是使用 containers文件夹进行存储。
<ul><li>containers ------ 用于存储容器组件的文件夹</li> <li>redux ------ 用于存储 react-redux相关的文件夹</li></ul></li></ul> <h4 id="_4-创建容器组件"><a href="#_4-创建容器组件" class="header-anchor">#</a> 4. 创建容器组件</h4> <p>容器组件通过 react-redux的 connect() 方法进行创建。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// 引入 Count的 UI组件
<span class="token function">import</span> Count from <span class="token string">&quot;../../components/Count&quot;</span><span class="token punctuation">;</span>
// 引入 connect用于连接 UI组件与 redux
<span class="token function">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> from <span class="token string">'react-redux'</span>

// 该函数的返回值作为状态传递给 UI组件
<span class="token keyword">function</span> mapStateToProps<span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">{</span>
        count: state,
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
// 该函数的返回值作为操作状态的方法传递给 UI组件
<span class="token keyword">function</span> mapDispatchToProps<span class="token punctuation">(</span>dispatch<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">{</span>
        add: <span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            console.log<span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token builtin class-name">export</span> default connect<span class="token punctuation">(</span>mapStateToProps, mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>使用 connect( )( )创建并暴露一个 Count组件的容器组件。</li> <li>调用 connect时有两个参数，且必须时函数。
<ul><li>mapStateToProps( state ): 该函数的返回值会作为 状态 传递给 UI组件
<ul><li>state: 参数 state 为 react-redux 默认操作好的 store.getState()</li></ul></li> <li>mapDispatchToProps( dispatch ): 该函数的返回值会作为 操作状态的方法 传递给 UI组件，有语法糖写法，传入个对象即可（看下面代码）。
<ul><li>dispatch: 参数 dispatch 为 react-redux 默认给的 store.dispatch 方法
这里只是为了讲解方便，使用时可以使用语法糖的。
注意的几个地方：</li></ul></li></ul></li></ul> <p>一般都是把 UI组件 与 容器组件 写在一个文件中，至于存在哪个文件夹中看公司需求（一般都是 containers）
容器组件里的 store不是通过引入使用，而是作为 props传递给容器组件的标签的。<code>&lt;Count store={store} /&gt;</code>
语法糖写法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// 引入 Count的 UI组件
<span class="token function">import</span> Count from <span class="token string">&quot;../../components/Count&quot;</span><span class="token punctuation">;</span>
// 引入 connect用于连接 UI组件与 redux
<span class="token function">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> from <span class="token string">'react-redux'</span>

// 精简写法
<span class="token builtin class-name">export</span> default connect<span class="token punctuation">(</span>
    state <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>count: state<span class="token punctuation">}</span><span class="token punctuation">)</span>,
    <span class="token punctuation">{</span>
        add: <span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span><span class="token number">1234</span>, data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_5-provider-组件"><a href="#_5-provider-组件" class="header-anchor">#</a> 5. Provider 组件</h4> <p>如果你有许多个容器组件，那么每个容器组件都要传入 store，那么是不是觉得太繁琐了呢？所以 react-redux 提供了 Provider组件用于处理这个问题，只需要在根标签处使用并把 store传递进去，他就可以自动判断哪些组件需要使用 store并自动传递给它。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> React from <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token function">import</span> ReactDOM from <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token function">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token function">import</span> App from <span class="token string">'./App'</span><span class="token punctuation">;</span>
<span class="token function">import</span> store from <span class="token string">&quot;./redux/store&quot;</span>
// 优化3: 使用自带的 Provider自动判断哪些组件需要使用 store，从而自动导入
<span class="token function">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> from <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
ReactDOM.render<span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider <span class="token assign-left variable">store</span><span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App /<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>/Provider<span class="token operator">&gt;</span>,
  document.getElementById<span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_6-监听状态变化"><a href="#_6-监听状态变化" class="header-anchor">#</a> 6. 监听状态变化</h4> <p>有没有发现，我上面的代码已经没有再写 store.subscribe() 监听状态变化了，是因为我们创建容器组件的 connect已经帮我们进行监听了。</p> <h4 id="_7-容器组件之间通信"><a href="#_7-容器组件之间通信" class="header-anchor">#</a> 7. 容器组件之间通信</h4> <p>其实这个很简单，还记的 connect的第一个函数的第一个参数吗？传递给 UI组件的是 props，他的参数是 state，这个 state是 store.getState()。
可是此时你的 store.getState() 不再是一个单纯的值，而是所有 reducer的对象，所以我们可以在里面获取到其他容器组件的值。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> default connect<span class="token punctuation">(</span>
    state <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>count: state.count, personLength: state.persons.length<span class="token punctuation">}</span><span class="token punctuation">)</span>,
    <span class="token punctuation">{</span>
        increment: createIncrementAction,
        decrement: createDecrementAction,
        asyncIncrement: createIncrementAsyncAction,
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_8-文件规范"><a href="#_8-文件规范" class="header-anchor">#</a> 8. 文件规范</h4> <p>创建了那么多东西，有的可以整合一下的，让我们来修整修整：</p> <ul><li>containers ------ 用于存放容器组件的文件夹（UI组件与容器组件写在一起）
<ul><li>Count.js ------ Count 的容器组件</li> <li>Person.js ------ Person 的容器组件</li></ul></li> <li>redux ------ 用于存放 react-redux相关的文件夹
<ul><li>actions ------ 用于存放所有 action的文件夹
<ul><li>count.js ------ 用于存储 Count组件的 action</li> <li>person.js ------ 用于存储 Person组件的 action</li></ul></li> <li>reducers ------ 用于存放所有 reducer的文件夹
<ul><li>count.js ------ 用于存储 Count组件的 reducer</li> <li>person.js ------ 用于存储 Person组件的 reducer</li> <li>index.js ------ 用于存储汇总的 reducer的文件（combineReducers()方法）</li></ul></li> <li>constant.js ------ 用于存储一些公用的命名的文件</li> <li>store.js ------ react-redux的 store文件</li></ul></li></ul> <h4 id="_9-再说一遍-能不用就别用这东西"><a href="#_9-再说一遍-能不用就别用这东西" class="header-anchor">#</a> 9. 再说一遍，能不用就别用这东西！！</h4> <h3 id="十二、react16-8-与一些扩展"><a href="#十二、react16-8-与一些扩展" class="header-anchor">#</a> 十二、React16.8 与一些扩展</h3> <h4 id="_1-lazy-与-suspense"><a href="#_1-lazy-与-suspense" class="header-anchor">#</a> 1. lazy() 与 Suspense</h4> <p>之前的组件，都是一并加载的，这样会给服务器带来较大的负担，所以 react推出了 lazy()懒加载，进行组件的按需加载。
与之一起出来的是 Suspense，他解决的是组件在加载过程中还没加载出来时的白屏，用于展示其他的内容。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> React, <span class="token punctuation">{</span> Component, lazy, Suspense <span class="token punctuation">}</span> from <span class="token string">'react'</span>
<span class="token function">import</span> <span class="token punctuation">{</span>Route, Link<span class="token punctuation">}</span> from <span class="token string">&quot;react-router-dom&quot;</span>

// <span class="token function">import</span> Home from <span class="token string">&quot;./Home&quot;</span><span class="token punctuation">;</span>
// <span class="token function">import</span> About from <span class="token string">&quot;./About&quot;</span><span class="token punctuation">;</span>
<span class="token function">import</span> Loading from <span class="token string">&quot;./Loading&quot;</span><span class="token punctuation">;</span>
// lazy<span class="token punctuation">(</span><span class="token punctuation">)</span> 方法的参数是一个函数，返回需要加载的组件
const Home <span class="token operator">=</span> lazy<span class="token variable"><span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span>import<span class="token punctuation">(</span>&quot;.<span class="token operator">/</span>Home&quot;<span class="token punctuation">))</span></span>
const About <span class="token operator">=</span> lazy<span class="token variable"><span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span>import<span class="token punctuation">(</span>&quot;.<span class="token operator">/</span>About&quot;<span class="token punctuation">))</span></span>
<span class="token builtin class-name">export</span> default class index extends Component <span class="token punctuation">{</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;/home&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Link <span class="token assign-left variable">to</span><span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span>/Link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>hr/<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>/* Suspense 用于解决加载组件时的白屏，可以显示其他的内容，而其他内容不允许使用 lazy加载 */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Suspense <span class="token assign-left variable">fallback</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Loading/<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Route <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/Route<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Route <span class="token assign-left variable">path</span><span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> <span class="token assign-left variable">component</span><span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/Route<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>/Suspense<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>lazy 的参数是一个函数，使用 import 导入一个组件并返回</li> <li>Suspense 的属性 fallback属性的属性值是 组件标签 而不是组件</li> <li>Suspense所使用的组件不能使用 lazy进行懒加载。</li></ul> <h4 id="_2-hook"><a href="#_2-hook" class="header-anchor">#</a> 2. Hook</h4> <p>React16.8可以说是给函数式组件一次春天，因为他有了Hook，可以实现一些 state、生命周期函数，refs等特性。
让我们一个个来看：</p> <h5 id="_1-statehook"><a href="#_1-statehook" class="header-anchor">#</a> (1) stateHook</h5> <p>可以让函数式组件实现使用 state的特性：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>
<span class="token builtin class-name">export</span> default <span class="token keyword">function</span> <span class="token function-name function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    // useState返回一个数组，只有两个元素（只有两个元素）
    // 元素1 为状态，元素2 为更新状态的方法
    // 第一次调用时以及将count进行底层存储，所以 Demo重复渲染不会重置count数据
    const <span class="token punctuation">[</span>count, setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React.useState<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> // 初始值赋为 <span class="token number">0</span>
    const <span class="token punctuation">[</span>name, setName<span class="token punctuation">]</span> <span class="token operator">=</span> React.useState<span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-name function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        // 进行状态赋值
        // setCount<span class="token punctuation">(</span>count + <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> // 写法1，直接将原来的状态值覆盖
        setCount<span class="token punctuation">(</span>count<span class="token operator">=</span><span class="token operator">&gt;</span> count+1<span class="token punctuation">)</span><span class="token punctuation">;</span> // 写法2，参数为函数，接受原本的状态值，返回新的状态值，覆盖原来的状态
    <span class="token punctuation">}</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>名字：<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>
            <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前求和：<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击加一<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>    
        <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_2-effecthook"><a href="#_2-effecthook" class="header-anchor">#</a> (2) EffectHook</h5> <p>可以让函数式组件实现类似生命周期钩子的特性：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> default <span class="token keyword">function</span> <span class="token function-name function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    const <span class="token punctuation">[</span>count, setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React.useState<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    const <span class="token punctuation">[</span>name, setName<span class="token punctuation">]</span> <span class="token operator">=</span> React.useState<span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-name function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        setCount<span class="token punctuation">(</span>count<span class="token operator">=</span><span class="token operator">&gt;</span> count+1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function-name function">updName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        setName<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">&quot;Jerry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function-name function">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        ReactDOM.unmountComponentAtNode<span class="token punctuation">(</span>document.querySelector<span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // useEffect接收两个参数，第一个为函数体，第二个为检测的对象<span class="token punctuation">(</span>数组<span class="token punctuation">)</span>，当检测的对象状态发生改变，就会触发函数
    // 不填写第二参数时，检测所有元素，相当于 componentDidUpdate生命周期函数
    React.useEffect<span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        // console.log<span class="token punctuation">(</span><span class="token string">&quot;asdf&quot;</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">let</span> timer <span class="token operator">=</span> setInterval<span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            setCount<span class="token punctuation">(</span>count<span class="token operator">=</span><span class="token operator">&gt;</span>count+1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>,1000<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>        // 在 useEffect中的函数体里返回的函数，相当于 componentWillUnmount生命周期函数
            console.log<span class="token punctuation">(</span><span class="token string">&quot;unmount&quot;</span><span class="token punctuation">)</span>
            clearInterval<span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">;</span>        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> // 数组为空是谁也不检测，只执行一次函数，相当于生命周期函数的 componentDidMount
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前求和：<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击加一<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前名字：<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>updName<span class="token punctuation">}</span><span class="token operator">&gt;</span>修改名字为Jerry<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>unmount<span class="token punctuation">}</span><span class="token operator">&gt;</span>卸载组件<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以把 useEffect Hook 看作三个函数的结合：</p> <ul><li>componentDidMount</li> <li>componentDidUpdate</li> <li>componentWillUnmount</li></ul> <h5 id="_3-refhook"><a href="#_3-refhook" class="header-anchor">#</a> (3) refHook</h5> <p>refHook 可以让函数式组件实现类似 ref的特性</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> default <span class="token keyword">function</span> <span class="token function-name function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    const <span class="token punctuation">[</span>count, setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React.useState<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function-name function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        setCount<span class="token punctuation">(</span>count<span class="token operator">=</span><span class="token operator">&gt;</span> count+1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function-name function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        // 获取文本框内容
        alert<span class="token punctuation">(</span>myInput.current.value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // 生成一个容器
    const myInput <span class="token operator">=</span> React.useRef<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前求和：<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
            <span class="token punctuation">{</span>/* 绑定容器 */<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token assign-left variable">ref</span><span class="token operator">=</span><span class="token punctuation">{</span>myInput<span class="token punctuation">}</span>/<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击加一<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>show<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击展示数据<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-fragment"><a href="#_3-fragment" class="header-anchor">#</a> 3. Fragment</h4> <p>在 react渲染组件的时候，当你的组件越来越多时，你有没有发现你的 DOM层级越来越多，有些不美观，所以就出现了 Fragment。
可以使用 Fragment标签代替组件的根标签，在 React解析的时候会被处理掉，
从而让生成出来的代码的层级更加简洁。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> default class Demo extends Component <span class="token punctuation">{</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            // 使用空标签可以达到一样的效果，但是空标签不允许包含任何的属性
            <span class="token operator">&lt;</span>Fragment <span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span>/<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span>/<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/Fragment<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-context"><a href="#_4-context" class="header-anchor">#</a> 4. Context</h4> <p>Context是一种新的组件通信方式，常用于【祖组件】和【后代组件】之间通信。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// <span class="token number">1</span>. 创建一个 Context容器对象
const UserNameContext <span class="token operator">=</span> React.createContext<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
// <span class="token number">1.1</span> 拿到 Provider与 Consumer属性
const <span class="token punctuation">{</span>Provider, Consumer<span class="token punctuation">}</span> <span class="token operator">=</span> UserNameContext<span class="token punctuation">;</span>
<span class="token builtin class-name">export</span> default class A extends Component <span class="token punctuation">{</span>
    <span class="token assign-left variable">state</span><span class="token operator">=</span><span class="token punctuation">{</span>username: <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>我是A组件<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我的用户名是：<span class="token punctuation">{</span>this.state.username<span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>/* <span class="token number">2</span> 使用组件，后代组件都能收到来自 value的值，就在 this上的 context属性上（需提前声明）  */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Provider <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token punctuation">{</span>this.state.username<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>B/<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>/Provider<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
class B extends Component <span class="token punctuation">{</span>
    // <span class="token number">3</span>. 声明接受 Context
    static contextType <span class="token operator">=</span> UserNameContext<span class="token punctuation">;</span>   // 此方法只适用于 类组件
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span>this.context<span class="token punctuation">)</span><span class="token punctuation">;</span>  // Tom
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>我是B组件<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>A的用户名是：<span class="token punctuation">{</span>this.context<span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>C/<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-name function">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;c&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>我是C组件<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>         
                <span class="token punctuation">{</span>/* <span class="token number">3.2</span> 使用 Consumer组件进行声明接受（类组件和函数式组件都可以）  */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>value<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token string">&quot;A的用户名是：&quot;</span> + value<span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>/Consumer<span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-purecomponent"><a href="#_5-purecomponent" class="header-anchor">#</a> 5. PureComponent</h4> <p>在组件中，只要执行了 setState()，即使没更新状态数据，组件也会重新 render()。
只要组件重新 render()，就会自动重新 render()子组件，纵使子组件没有使用到父组件任何数据。
这两种情况都会导致重复渲染，使得效率低下。
效率高的做法：只有组件的state或props发生变化时菜重新render()。</p> <ul><li>解决方法1：通过生命周期函数 shouldComponentUpdate() 进行数据判断在进行重新渲染</li> <li>解决方法2：类组件通过继承 PureComponent组件，自动进行数据判断（浅对比---判断地址值）（常用）</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> React, <span class="token punctuation">{</span> Component, PureComponent <span class="token punctuation">}</span> from <span class="token string">'react'</span>
<span class="token builtin class-name">export</span> default class Parent extends PureComponent <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>carName: <span class="token string">&quot;奔驰&quot;</span><span class="token punctuation">}</span>
    changeCar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        this.setState<span class="token punctuation">(</span>state<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>carName:<span class="token string">&quot;迈巴赫&quot;</span><span class="token punctuation">}</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // shouldComponentUpdate有两个参数，分别是准备修改的 props和 state
    // shouldComponentUp date<span class="token punctuation">(</span>nextProps, nextState<span class="token punctuation">)</span><span class="token punctuation">{</span>
    //     console.log<span class="token punctuation">(</span>nextProps, nextState<span class="token punctuation">)</span><span class="token punctuation">;</span>  // 目标要修改的props和state
    //     console.log<span class="token punctuation">(</span>this.props, this.state<span class="token punctuation">)</span><span class="token punctuation">;</span>   // 还未修改原本的props和state
    //     <span class="token builtin class-name">return</span> <span class="token operator">!</span>this.state.carName <span class="token operator">==</span><span class="token operator">=</span> nextState.carName<span class="token punctuation">;</span>
    // <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span><span class="token string">&quot;parent render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;parent&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Parent<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我的车是：<span class="token punctuation">{</span>this.state.carName<span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button <span class="token assign-left variable">onClick</span><span class="token operator">=</span><span class="token punctuation">{</span>this.changeCar<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击换车<span class="token operator">&lt;</span>/button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Child/<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
class Child extends PureComponent <span class="token punctuation">{</span>
    
    // shouldComponentUpdate<span class="token punctuation">(</span>nextProps<span class="token punctuation">)</span><span class="token punctuation">{</span>
    //     <span class="token builtin class-name">return</span> <span class="token operator">!</span>this.props.carName <span class="token operator">==</span><span class="token operator">=</span> nextProps.carName
    // <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span><span class="token string">&quot;child render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;child&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>Child<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
                <span class="token punctuation">{</span>/* <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>父亲的车是：<span class="token punctuation">{</span>this.props.carName<span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span> */<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-父子组件"><a href="#_6-父子组件" class="header-anchor">#</a> 6. 父子组件</h4> <p>不多说，直接上代码：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> React, <span class="token punctuation">{</span> Component, PureComponent <span class="token punctuation">}</span> from <span class="token string">'react'</span>
<span class="token function">import</span> <span class="token string">&quot;./index.css&quot;</span>

<span class="token builtin class-name">export</span> default class Parent extends PureComponent <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>carName: <span class="token string">&quot;奔驰&quot;</span><span class="token punctuation">}</span>
    changeCar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
        this.setState<span class="token punctuation">(</span>state<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>carName:<span class="token string">&quot;迈巴赫&quot;</span><span class="token punctuation">}</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span><span class="token string">&quot;parent render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;parent&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Parent<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我的车是：<span class="token punctuation">{</span>this.state.carName<span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>/* A组件 与 B组件 形成父子组件的第二种方法 */<span class="token punctuation">}</span>
                <span class="token punctuation">{</span>/* <span class="token operator">&lt;</span>A<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>B/<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>/A<span class="token operator">&gt;</span> */<span class="token punctuation">}</span>
                <span class="token punctuation">{</span>/* 类似于 Vue的插槽 */<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>A <span class="token assign-left variable">render</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>B <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span>/<span class="token operator">&gt;</span><span class="token punctuation">}</span>/<span class="token operator">&gt;</span>  
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

class A extends PureComponent <span class="token punctuation">{</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span><span class="token string">&quot;A render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>A<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
                <span class="token punctuation">{</span>/* A组件 与 B组件 形成父子组件的第一种方式 */<span class="token punctuation">}</span>
                <span class="token punctuation">{</span>/* <span class="token operator">&lt;</span>B/<span class="token operator">&gt;</span> */<span class="token punctuation">}</span>
                <span class="token punctuation">{</span>/* <span class="token punctuation">{</span>this.props.children<span class="token punctuation">}</span> */<span class="token punctuation">}</span>
                <span class="token punctuation">{</span>this.props.render<span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
class B extends PureComponent <span class="token punctuation">{</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console.log<span class="token punctuation">(</span><span class="token string">&quot;B render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">className</span><span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>B<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>this.props.name<span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_7-errorboundary"><a href="#_7-errorboundary" class="header-anchor">#</a> 7. ErrorBoundary</h4> <p>当你的组件存在父子组件关系时，如果说你的子组件出现了错误，那么会导致父组件一并崩掉，那有没有什么办法，可以把错误控制在一个组件里，不让他扩散呢？
答案是有的，有两个函数：</p> <ul><li>getDerivedStateFromError(error)</li> <li>componentDidCatch(error, info)</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> React, <span class="token punctuation">{</span> Component, Fragment <span class="token punctuation">}</span> from <span class="token string">'react'</span>
<span class="token function">import</span> Child from <span class="token string">&quot;./Child&quot;</span><span class="token punctuation">;</span>
// 错误边界即把组件的错误信息控制在一个组件中，不使他扩散而导致程序崩溃
<span class="token builtin class-name">export</span> default class Person extends Component <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        hasError: <span class="token string">&quot;&quot;</span>,   // 用于标识子组件是否产生错误
    <span class="token punctuation">}</span>
    // 当子组件发生错误时会触发该生命周期函数，且参数为错误信息
    // 只适用于生产环境，只能捕获后代组件生命周期产生的错误
    static getDerivedStateFromError<span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
        // 一般用于处理错误出现时返回给用户展示的东西
        console.log<span class="token punctuation">(</span><span class="token string">&quot;出错了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console.log<span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // 组件渲染过程中出错就会触发该生命周期函数
    componentDidCatch<span class="token punctuation">(</span>error, info<span class="token punctuation">)</span><span class="token punctuation">{</span>
        // 一般用于统计错误，反馈给雾浮起，用于通知程序员进行bug修改
        console.log<span class="token punctuation">(</span><span class="token string">&quot;渲染组件出错&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console.log<span class="token punctuation">(</span>error, info<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-name function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>我是Parent组件<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
                <span class="token punctuation">{</span>
                    this.state.hasError ? 
                        <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>当前网络不大行，建议买高级网络套餐好吧<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token builtin class-name">:</span>
                        <span class="token operator">&lt;</span>Child/<span class="token operator">&gt;</span>                
                <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>/Fragment<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8-组件通信方式总结"><a href="#_8-组件通信方式总结" class="header-anchor">#</a> 8. 组件通信方式总结</h4> <ul><li>组件之间的关系：
<ul><li>父子组件</li> <li>兄弟组件</li> <li>祖孙组件（跨级组件）</li></ul></li> <li>几种通信方式：
<ul><li>props
<ul><li>children props</li> <li>render props</li></ul></li> <li>消息订阅 pubsub, event</li> <li>集中式管理 redux, dva, react-redux</li> <li>conText 生产者， 消费者模式</li></ul></li> <li>较好的搭配方式：
<ul><li>父子组件：props</li> <li>兄弟组件： 消息订阅发布，集中式管理</li> <li>祖孙组件：消息订阅发布，集中式管理，conText</li></ul></li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#一、react-简介" class="sidebar-link reco-side-一、react-简介" data-v-b57cc07c>一、React 简介</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#二、组件的使用" class="sidebar-link reco-side-二、组件的使用" data-v-b57cc07c>二、组件的使用</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#三、组件的三大属性" class="sidebar-link reco-side-三、组件的三大属性" data-v-b57cc07c>三、组件的三大属性</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#四、组件的事件绑定" class="sidebar-link reco-side-四、组件的事件绑定" data-v-b57cc07c>四、组件的事件绑定</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#五、组件的生命周期" class="sidebar-link reco-side-五、组件的生命周期" data-v-b57cc07c>五、组件的生命周期</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#六、组件列表渲染、条件渲染与-dom-的-diffing-算法" class="sidebar-link reco-side-六、组件列表渲染、条件渲染与-dom-的-diffing-算法" data-v-b57cc07c>六、组件列表渲染、条件渲染与 DOM 的 Diffing 算法</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#七、react-脚手架" class="sidebar-link reco-side-七、react-脚手架" data-v-b57cc07c>七、React 脚手架</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#八、react-router-的使用" class="sidebar-link reco-side-八、react-router-的使用" data-v-b57cc07c>八、react-router 的使用</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#九、路由组件之间的参数传递" class="sidebar-link reco-side-九、路由组件之间的参数传递" data-v-b57cc07c>九、路由组件之间的参数传递</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#十、redux-的使用" class="sidebar-link reco-side-十、redux-的使用" data-v-b57cc07c>十、redux 的使用</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#十一、了解与使用-react-redux" class="sidebar-link reco-side-十一、了解与使用-react-redux" data-v-b57cc07c>十一、了解与使用 react-redux</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/react-base.html#十二、react16-8-与一些扩展" class="sidebar-link reco-side-十二、react16-8-与一些扩展" data-v-b57cc07c>十二、React16.8 与一些扩展</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:-1;" data-v-248d85d6></canvas></div><canvas id="vuepress-canvas-cursor"></canvas><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/media/starsky.m4a" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:20px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/media/starsky.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/media/starsky.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>Star Sky</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>Two Steps From Hell</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/vuepress-blog/assets/js/app.5d9f3e6e.js" defer></script><script src="/vuepress-blog/assets/js/7.52cd3cfd.js" defer></script><script src="/vuepress-blog/assets/js/2.5e77f0d2.js" defer></script><script src="/vuepress-blog/assets/js/1.c3e4b76d.js" defer></script><script src="/vuepress-blog/assets/js/35.7648c433.js" defer></script>
  </body>
</html>
